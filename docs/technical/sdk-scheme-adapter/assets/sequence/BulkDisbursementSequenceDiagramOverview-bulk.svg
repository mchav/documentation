<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="14626px" preserveAspectRatio="none" style="width:4106px;height:14626px;" version="1.1" viewBox="0 0 4106 14626" width="4106px" zoomAndPan="magnify"><defs><filter height="300%" id="flsroffefztak" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="14611.7188" style="stroke: #383838; stroke-width: 1.0;" width="596" x="1457.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182" x="1664.5" y="26.8379">Payment Manager</text><rect fill="#D3D3D3" height="14611.7188" style="stroke: #383838; stroke-width: 1.0;" width="762" x="3276.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182" x="3566.5" y="26.8379">Payment Manager</text><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="317.375" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1985.5" y="3500.6094"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="709.7656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1985.5" y="7156.5156"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="1225.1719" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1985.5" y="11239.5156"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="281.375" style="stroke: #000000; stroke-width: 2.0;" width="515.5" x="1317" y="1355.2344"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="97.0156" style="stroke: #000000; stroke-width: 2.0;" width="371" x="1451.5" y="1532.5938"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="125.6875" style="stroke: #000000; stroke-width: 2.0;" width="1073" x="986.5" y="3030.5313"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="1059.4844" style="stroke: #000000; stroke-width: 2.0;" width="1587.5" x="1777" y="3170.2188"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="834.7813" style="stroke: #000000; stroke-width: 2.0;" width="1567.5" x="1787" y="3219.5625"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="705.0938" style="stroke: #000000; stroke-width: 2.0;" width="1423" x="1921.5" y="3342.25"/><rect fill="#FFFFFF" height="84.3438" style="stroke: none; stroke-width: 1.0;" width="1423" x="1921.5" y="3963"/><rect fill="#FFFFFF" height="168.3594" style="stroke: none; stroke-width: 1.0;" width="1587.5" x="1777" y="4061.3438"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="124.6875" style="stroke: #000000; stroke-width: 2.0;" width="532" x="1921.5" y="4098.0156"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="2475.4219" style="stroke: #000000; stroke-width: 2.0;" width="2489.5" x="581" y="4298.375"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="2419.0781" style="stroke: #000000; stroke-width: 2.0;" width="2469.5" x="591" y="4347.7188"/><rect fill="#FFFFFF" height="2126.7031" style="stroke: none; stroke-width: 1.0;" width="2469.5" x="591" y="4640.0938"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="1168.8281" style="stroke: #000000; stroke-width: 2.0;" width="2328.5" x="1736" y="6787.7969"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="459.7344" style="stroke: #000000; stroke-width: 2.0;" width="794" x="3260.5" y="7324.2031"/><rect fill="#FFFFFF" height="251.7031" style="stroke: none; stroke-width: 1.0;" width="794" x="3260.5" y="7532.2344"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="208.0313" style="stroke: #000000; stroke-width: 2.0;" width="774" x="3270.5" y="7568.9063"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="2779.8125" style="stroke: #000000; stroke-width: 2.0;" width="2489.5" x="581" y="7970.625"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="2723.4688" style="stroke: #000000; stroke-width: 2.0;" width="2469.5" x="591" y="8019.9688"/><rect fill="#FFFFFF" height="2431.0938" style="stroke: none; stroke-width: 1.0;" width="2469.5" x="591" y="8312.3438"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="1797.5938" style="stroke: #000000; stroke-width: 2.0;" width="2348.5" x="1736" y="10764.4375"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="152.3594" style="stroke: #000000; stroke-width: 2.0;" width="520" x="1921.5" y="10887.125"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="1501.5469" style="stroke: #000000; stroke-width: 2.0;" width="2153" x="1921.5" y="11053.4844"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="459.7344" style="stroke: #000000; stroke-width: 2.0;" width="794" x="3260.5" y="11474.875"/><rect fill="#FFFFFF" height="251.7031" style="stroke: none; stroke-width: 1.0;" width="794" x="3260.5" y="11682.9063"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="208.0313" style="stroke: #000000; stroke-width: 2.0;" width="774" x="3270.5" y="11719.5781"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="379.0625" style="stroke: #000000; stroke-width: 2.0;" width="1598" x="2466.5" y="12044.9531"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="211.7031" style="stroke: #000000; stroke-width: 2.0;" width="794" x="3260.5" y="12205.3125"/><rect fill="#FFFFFF" height="127.6875" style="stroke: none; stroke-width: 1.0;" width="794" x="3260.5" y="12289.3281"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="84.0156" style="stroke: #000000; stroke-width: 2.0;" width="774" x="3270.5" y="12326"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="488.4063" style="stroke: #000000; stroke-width: 2.0;" width="1468.5" x="591" y="14005.2969"/><rect fill="#FFFFFF" height="321.0469" style="stroke: none; stroke-width: 1.0;" width="1468.5" x="591" y="14172.6563"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="649" x2="649" y1="137.6875" y2="14510.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1050.5" x2="1050.5" y1="137.6875" y2="14510.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1520.5" x2="1520.5" y1="137.6875" y2="14510.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1990.5" x2="1990.5" y1="137.6875" y2="14510.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2530.5" x2="2530.5" y1="137.6875" y2="14510.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3105" x2="3105" y1="137.6875" y2="14510.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3339.5" x2="3339.5" y1="137.6875" y2="14510.7031"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="3975.5" x2="3975.5" y1="137.6875" y2="14510.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="91" x="601" y="132.8535">MFI Staff</text><ellipse cx="649.5" cy="53.0156" fill="#F8F8F8" filter="url(#flsroffefztak)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M649.5,61.0156 L649.5,88.0156 M636.5,69.0156 L662.5,69.0156 M649.5,88.0156 L636.5,103.0156 M649.5,88.0156 L662.5,103.0156 " fill="none" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="91" x="601" y="14532.541">MFI Staff</text><ellipse cx="649.5" cy="14547.375" fill="#F8F8F8" filter="url(#flsroffefztak)" rx="8" ry="8" style="stroke: #383838; stroke-width: 2.0;"/><path d="M649.5,14555.375 L649.5,14582.375 M636.5,14563.375 L662.5,14563.375 M649.5,14582.375 L636.5,14597.375 M649.5,14582.375 L662.5,14597.375 " fill="none" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 2.0;"/><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="104" x="996.5" y="91.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1003.5" y="120.8535">MFI CBS</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="104" x="996.5" y="14509.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1003.5" y="14539.541">MFI CBS</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1461.5" y="63.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="1494.5" y="93.1816">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1468.5" y="120.8535">Connector</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1461.5" y="14509.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="1494.5" y="14539.541">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1468.5" y="14567.2129">Connector</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1931.5" y="63.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1943.5" y="93.1816">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1938.5" y="120.8535">Connector</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1931.5" y="14509.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1943.5" y="14539.541">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1938.5" y="14567.2129">Connector</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="104" x="2476.5" y="63.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="2483.5" y="93.1816">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="2497" y="120.8535">Switch</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="104" x="2476.5" y="14509.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="2483.5" y="14539.541">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="2497" y="14567.2129">Switch</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="77" x="3065" y="91.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="3072" y="120.8535">Oracle</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="77" x="3065" y="14509.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="3072" y="14539.541">Oracle</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="97.0156" style="stroke: #383838; stroke-width: 1.5;" width="114" x="3280.5" y="35.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="62" x="3306.5" y="65.5098">Payee</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="3292.5" y="93.1816">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="3287.5" y="120.8535">Connector</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="97.0156" style="stroke: #383838; stroke-width: 1.5;" width="114" x="3280.5" y="14509.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="62" x="3306.5" y="14539.541">Payee</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="3292.5" y="14567.2129">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="3287.5" y="14594.8848">Connector</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="97.0156" style="stroke: #383838; stroke-width: 1.5;" width="114" x="3916.5" y="35.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="62" x="3942.5" y="65.5098">Payee</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="3949.5" y="93.1816">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="3923.5" y="120.8535">Connector</text><rect fill="#F8F8F8" filter="url(#flsroffefztak)" height="97.0156" style="stroke: #383838; stroke-width: 1.5;" width="114" x="3916.5" y="14509.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="62" x="3942.5" y="14539.541">Payee</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="3949.5" y="14567.2129">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="3923.5" y="14594.8848">Connector</text><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="317.375" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1985.5" y="3500.6094"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="709.7656" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1985.5" y="7156.5156"/><rect fill="#FFFFFF" filter="url(#flsroffefztak)" height="1225.1719" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1985.5" y="11239.5156"/><rect fill="#EEEEEE" filter="url(#flsroffefztak)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="4091.5" x="3" y="174.5234"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="4094.5" y1="174.5234" y2="174.5234"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="4094.5" y1="177.5234" y2="177.5234"/><rect fill="#EEEEEE" filter="url(#flsroffefztak)" height="35.6719" style="stroke: #000000; stroke-width: 2.0;" width="613" x="1742.25" y="157.6875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="593" x="1748.25" y="184.5254">Bulk Transfers implemented using Mojaloop bulk transfers</text><polygon fill="#383838" points="1038.5,233.0313,1048.5,237.0313,1038.5,241.0313,1042.5,237.0313" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="649.5" x2="1044.5" y1="237.0313" y2="237.0313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="656.5" y="230.1973">[1]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="230" x="686.5" y="230.1973">Make bulk disbursement</text><polygon fill="#383838" points="1508.5,819.3047,1518.5,823.3047,1508.5,827.3047,1512.5,823.3047" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1050.5" x2="1514.5" y1="823.3047" y2="823.3047"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1057.5" y="802.6348">[2]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="143" x="1087.5" y="788.7988">Disburse funds</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1093.5" y="816.4707"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1093.5" y="816.4707">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="135" x="1161.5" y="816.4707">bulkTransfers/</text><path d="M8,250.0313 L8,1339.0313 L1042,1339.0313 L1042,260.0313 L1032,250.0313 L8,250.0313 " fill="#ECECEC" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M1032,250.0313 L1032,260.0313 L1042,260.0313 L1032,250.0313 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="14" y="277.8691">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="519" x="32" y="305.541">"bulkHomeTransactionID": "string", # external identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="106" x="32" y="333.2129">"options": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="375" x="50" y="360.8848">"onlyValidateParty": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="50" y="388.5566">"autoAcceptParty": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="256" x="74" y="416.2285">"enabled": "true" # boolean</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="50" y="443.9004">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="203" x="50" y="471.5723">"autoAcceptQuote": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="276" x="62" y="499.2441">"enabled": "true", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="965" x="62" y="526.916">"transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="50" y="554.5879">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="367" x="50" y="582.2598">"skipPartyLookup": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="328" x="50" y="609.9316">"synchronous": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="546" x="50" y="637.6035">"bulkExpiration": DateTime, # expiration date time (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="38" y="665.2754">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="419" x="32" y="692.9473">"from": { "partyIdInfo": {} # (partyIdInfo type)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="80" y="720.6191">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="206" x="32" y="748.291">"individualtransfers": [</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="74" y="775.9629">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="692" x="86" y="803.6348">"homeTransactionId": "string", # Payer DFSP CBS Transaction identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="425" x="86" y="831.3066">"reference": "string", # Payer Loan reference</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="54" x="86" y="858.9785">"to": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="98" y="886.6504">"partyIdInfo": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="252" x="110" y="914.3223">"partyIdType": "MSISDN",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="233" x="110" y="941.9941">"partyIdentifier": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="279" x="110" y="969.666">"partySubIdOrType": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="150" x="110" y="997.3379">"fspId": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="110" y="1025.0098">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="98" y="1052.6816">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="533" x="86" y="1080.3535">"amountType": "RECEIVE" # SEND, RECEIVE (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="269" x="86" y="1108.0254">"currency" : "XXX" # (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="336" x="86" y="1135.6973">"amount": "100.0", # money (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="86" y="1163.3691">"note": "string"</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="592" x="86" y="1191.041">"quoteRequestExtensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="605" x="86" y="1218.7129">"transferRequestExtensions": [{ "key": "string", "value": "string"}]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="37" x="86" y="1246.3848">}, ...</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="12" x="74" y="1274.0566">],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="455" x="32" y="1301.7285">"extensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="14" y="1329.4004">}</text><path d="M1317,1355.2344 L1406,1355.2344 L1406,1374.2344 L1396,1384.2344 L1317,1384.2344 L1317,1355.2344 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="281.375" style="stroke: #000000; stroke-width: 2.0;" width="515.5" x="1317" y="1355.2344"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="1332" y="1379.0723">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="210" x="1421" y="1380.0723">[n times  (in parallel)]</text><polygon fill="#ECECEC" filter="url(#flsroffefztak)" points="1337,1402.5781,1505,1402.5781,1515,1433.5781,1505,1465.5781,1337,1465.5781,1327,1433.5781,1337,1402.5781" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="164" x="1339" y="1429.416">For each transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="153" x="1339" y="1457.0879">in bulk message</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1520.5" x2="1562.5" y1="1504.5938" y2="1504.5938"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1562.5" x2="1562.5" y1="1504.5938" y2="1517.5938"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1521.5" x2="1562.5" y1="1517.5938" y2="1517.5938"/><polygon fill="#383838" points="1531.5,1513.5938,1521.5,1517.5938,1531.5,1521.5938,1527.5,1517.5938" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1527.5" y="1497.7598">[3]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="250" x="1557.5" y="1497.7598">validate MSISDN &amp; Prefix</text><path d="M1451.5,1532.5938 L1520.5,1532.5938 L1520.5,1551.5938 L1510.5,1561.5938 L1451.5,1561.5938 L1451.5,1532.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="97.0156" style="stroke: #000000; stroke-width: 2.0;" width="371" x="1451.5" y="1532.5938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="1466.5" y="1556.4316">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="270" x="1535.5" y="1557.4316">[MSISDN Failed Validation]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1520.5" x2="1562.5" y1="1608.6094" y2="1608.6094"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1562.5" x2="1562.5" y1="1608.6094" y2="1621.6094"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1521.5" x2="1562.5" y1="1621.6094" y2="1621.6094"/><polygon fill="#383838" points="1531.5,1617.6094,1521.5,1621.6094,1531.5,1625.6094,1527.5,1621.6094" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1527.5" y="1601.7754">[4]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="253" x="1557.5" y="1601.7754">Add Last Error to Transfer</text><polygon fill="#383838" points="1978.5,2342.4063,1988.5,2346.4063,1978.5,2350.4063,1982.5,2346.4063" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1520.5" x2="1984.5" y1="2346.4063" y2="2346.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1527.5" y="2339.5723">[5]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1557.5" y="2339.5723">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="135" x="1625.5" y="2339.5723">/bulkTransfers</text><path d="M477,1648.6094 L477,3013.6094 L1511,3013.6094 L1511,1658.6094 L1501,1648.6094 L477,1648.6094 " fill="#ECECEC" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M1501,1648.6094 L1501,1658.6094 L1511,1658.6094 L1501,1648.6094 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="483" y="1676.4473">BulkTransferType</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="483" y="1704.1191">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="519" x="501" y="1731.791">"bulkHomeTransactionID": "string", # external identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="106" x="501" y="1759.4629">"options": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="375" x="519" y="1787.1348">"onlyValidateParty": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="519" y="1814.8066">"autoAcceptParty": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="256" x="543" y="1842.4785">"enabled": "true" # boolean</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="519" y="1870.1504">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="203" x="519" y="1897.8223">"autoAcceptQuote": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="276" x="531" y="1925.4941">"enabled": "true", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="965" x="531" y="1953.166">"transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="519" y="1980.8379">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="367" x="519" y="2008.5098">"skipPartyLookup": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="328" x="519" y="2036.1816">"synchronous": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="546" x="519" y="2063.8535">"bulkExpiration": DateTime, # expiration date time (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="507" y="2091.5254">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="419" x="501" y="2119.1973">"from": { "partyIdInfo": {} # (partyIdInfo type)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="549" y="2146.8691">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="206" x="501" y="2174.541">"individualtransfers": [</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="543" y="2202.2129">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="692" x="555" y="2229.8848">"homeTransactionId": "string", # Payer DFSP CBS Transaction identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="425" x="555" y="2257.5566">"reference": "string", # Payer Loan reference</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="54" x="555" y="2285.2285">"to": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="567" y="2312.9004">"partyIdInfo": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="252" x="579" y="2340.5723">"partyIdType": "MSISDN",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="233" x="579" y="2368.2441">"partyIdentifier": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="279" x="579" y="2395.916">"partySubIdOrType": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="150" x="579" y="2423.5879">"fspId": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="579" y="2451.2598">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="567" y="2478.9316">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="533" x="555" y="2506.6035">"amountType": "RECEIVE" # SEND, RECEIVE (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="269" x="555" y="2534.2754">"currency" : "XXX" # (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="336" x="555" y="2561.9473">"amount": "100.0", # money (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="555" y="2589.6191">"note": "string"</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="592" x="555" y="2617.291">"quoteRequestExtensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="605" x="555" y="2644.9629">"transferRequestExtensions": [{ "key": "string", "value": "string"}]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="117" x="555" y="2672.6348">"lastError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="567" y="2700.3066">"httpStatusCode": 0,</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="173" x="567" y="2727.9785">"mojaloopError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="190" x="579" y="2755.6504">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="197" x="591" y="2783.3223">"errorCode": "8812",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="257" x="591" y="2810.9941">"errorDescription": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="591" y="2838.666">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="579" y="2866.3379">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="567" y="2894.0098">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="37" x="555" y="2921.6816">}, ...</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="12" x="543" y="2949.3535">],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="455" x="501" y="2977.0254">"extensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="483" y="3004.6973">}</text><path d="M986.5,3030.5313 L1055.5,3030.5313 L1055.5,3049.5313 L1045.5,3059.5313 L986.5,3059.5313 L986.5,3030.5313 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="125.6875" style="stroke: #000000; stroke-width: 2.0;" width="1073" x="986.5" y="3030.5313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="1001.5" y="3054.3691">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="1070.5" y="3055.3691">[if (!synchronous)]</text><polygon fill="#383838" points="1531.5,3102.5469,1521.5,3106.5469,1531.5,3110.5469,1527.5,3106.5469" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1525.5" x2="1989.5" y1="3106.5469" y2="3106.5469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1537.5" y="3099.7129">[6]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1567.5" y="3099.7129">Receive HTTP 202 response</text><polygon fill="#383838" points="1061.5,3144.2188,1051.5,3148.2188,1061.5,3152.2188,1057.5,3148.2188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1055.5" x2="1519.5" y1="3148.2188" y2="3148.2188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1067.5" y="3141.3848">[7]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1097.5" y="3141.3848">Receive HTTP 202 response</text><path d="M1777,3170.2188 L1846,3170.2188 L1846,3189.2188 L1836,3199.2188 L1777,3199.2188 L1777,3170.2188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1059.4844" style="stroke: #000000; stroke-width: 2.0;" width="1587.5" x="1777" y="3170.2188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="1792" y="3194.0566">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="1861" y="3195.0566">[if (!skipPartyLookup)]</text><path d="M1787,3219.5625 L1876,3219.5625 L1876,3238.5625 L1866,3248.5625 L1787,3248.5625 L1787,3219.5625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="834.7813" style="stroke: #000000; stroke-width: 2.0;" width="1567.5" x="1787" y="3219.5625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="1802" y="3243.4004">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="545" x="1891" y="3244.4004">[N times &amp; within bulkExpiration timelimit  (in parallel)]</text><polygon fill="#ECECEC" filter="url(#flsroffefztak)" points="1807,3266.9063,1975,3266.9063,1985,3297.9063,1975,3329.9063,1807,3329.9063,1797,3297.9063,1807,3266.9063" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="164" x="1809" y="3293.7441">For each transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="153" x="1809" y="3321.416">in bulk message</text><path d="M1921.5,3342.25 L1990.5,3342.25 L1990.5,3361.25 L1980.5,3371.25 L1921.5,3371.25 L1921.5,3342.25 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="705.0938" style="stroke: #000000; stroke-width: 2.0;" width="1423" x="1921.5" y="3342.25"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="1936.5" y="3366.0879">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="2005.5" y="3367.0879">[if (validTransfer)]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="3418.2656" y2="3418.2656"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="3418.2656" y2="3431.2656"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="3431.2656" y2="3431.2656"/><polygon fill="#383838" points="2001.5,3427.2656,1991.5,3431.2656,2001.5,3435.2656,1997.5,3431.2656" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1997.5" y="3411.4316">[8]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="202" x="2027.5" y="3411.4316">Create TransactionId</text><polygon fill="#383838" points="2518.5,3496.6094,2528.5,3500.6094,2518.5,3504.6094,2522.5,3500.6094" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1995.5" x2="2524.5" y1="3500.6094" y2="3500.6094"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="2002.5" y="3479.9395">[9]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="2032.5" y="3466.1035">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="86" x="2085.5" y="3466.1035">/parties/*</text><text fill="#000000" font-family="sans-serif" font-size="22" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="143" x="2032.5" y="3493.7754">&lt;PartyIdType&gt;</text><text fill="#000000" font-family="sans-serif" font-size="22" font-style="italic" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="2175.5" y="3493.7754">/</text><text fill="#000000" font-family="sans-serif" font-size="22" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="2181.5" y="3493.7754">&lt;PartyId&gt;</text><polygon fill="#383838" points="3093.5,3565.9531,3103.5,3569.9531,3093.5,3573.9531,3097.5,3569.9531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="3099.5" y1="3569.9531" y2="3569.9531"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="3549.2832">[10]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="169" x="2579.5" y="3535.4473">Lookup DFSP for</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="178" x="2579.5" y="3563.1191">requested Type/ID</text><line style="stroke: #383838; stroke-width: 1.0;" x1="3105.5" x2="3147.5" y1="3639.2969" y2="3639.2969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3147.5" x2="3147.5" y1="3639.2969" y2="3652.2969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3106.5" x2="3147.5" y1="3652.2969" y2="3652.2969"/><polygon fill="#383838" points="3116.5,3648.2969,3106.5,3652.2969,3116.5,3656.2969,3112.5,3652.2969" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3112.5" y="3618.627">[11]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="161" x="3154.5" y="3604.791">Lookup Party for</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="178" x="3154.5" y="3632.4629">requested Type/ID</text><polygon fill="#383838" points="2541.5,3689.9688,2531.5,3693.9688,2541.5,3697.9688,2537.5,3693.9688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2535.5" x2="3104.5" y1="3693.9688" y2="3693.9688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2547.5" y="3687.1348">[12]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="156" x="2589.5" y="3687.1348">Return DFSP ID</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="2572.5" y1="3763.3125" y2="3763.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2572.5" x2="2572.5" y1="3763.3125" y2="3776.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2531.5" x2="2572.5" y1="3776.3125" y2="3776.3125"/><polygon fill="#383838" points="2541.5,3772.3125,2531.5,3776.3125,2541.5,3780.3125,2537.5,3776.3125" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="3742.6426">[13]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="2579.5" y="3728.8066">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="240" x="2632.5" y="3728.8066">/parties/{type}/{id}/{subid}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="519" x="2579.5" y="3756.4785">Make call to payee DFSP to confirm Party information</text><polygon fill="#383838" points="2001.5,3813.9844,1991.5,3817.9844,2001.5,3821.9844,1997.5,3817.9844" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1995.5" x2="2529.5" y1="3817.9844" y2="3817.9844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2007.5" y="3811.1504">[14]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="2049.5" y="3811.1504">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="169" x="2101.5" y="3811.1504">/parties/{type}/{id}</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="3887.3281" y2="3887.3281"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="3887.3281" y2="3900.3281"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="3900.3281" y2="3900.3281"/><polygon fill="#383838" points="2001.5,3896.3281,1991.5,3900.3281,2001.5,3904.3281,1997.5,3900.3281" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="3866.6582">[15]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="285" x="2039.5" y="3852.8223">Update transaction status and</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="260" x="2045.5" y="3880.4941">attach get parties response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="3942" y2="3942"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="3942" y2="3955"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="3955" y2="3955"/><polygon fill="#383838" points="2001.5,3951,1991.5,3955,2001.5,3959,1997.5,3955" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="3935.166">[16]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="302" x="2039.5" y="3935.166">Add to next phase FSP bulk call</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1921.5" x2="3344.5" y1="3964" y2="3964"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="1926.5" y="3986.8379">[if (!validTransfer)]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="4026.3438" y2="4026.3438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="4026.3438" y2="4039.3438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="4039.3438" y2="4039.3438"/><polygon fill="#383838" points="2001.5,4035.3438,1991.5,4039.3438,2001.5,4043.3438,1997.5,4039.3438" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="4019.5098">[17]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="42" x="2039.5" y="4019.5098">Skip</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1777" x2="3364.5" y1="4062.3438" y2="4062.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="218" x="1782" y="4085.1816">[if (skipPartyLookup)]</text><path d="M1921.5,4098.0156 L2010.5,4098.0156 L2010.5,4117.0156 L2000.5,4127.0156 L1921.5,4127.0156 L1921.5,4098.0156 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="124.6875" style="stroke: #000000; stroke-width: 2.0;" width="532" x="1921.5" y="4098.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="1936.5" y="4121.8535">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="423" x="2025.5" y="4122.8535">[N times &amp; within bulkExpiration timelimit]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="4201.7031" y2="4201.7031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="4201.7031" y2="4214.7031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="4214.7031" y2="4214.7031"/><polygon fill="#383838" points="2001.5,4210.7031,1991.5,4214.7031,2001.5,4218.7031,1997.5,4214.7031" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="4181.0332">[18]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="174" x="2039.5" y="4167.1973">Validate party info</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="302" x="2045.5" y="4194.8691">Add to next phase FSP bulk call</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="4270.375" y2="4270.375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="4270.375" y2="4283.375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="4283.375" y2="4283.375"/><polygon fill="#383838" points="2001.5,4279.375,1991.5,4283.375,2001.5,4287.375,1997.5,4283.375" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="4263.541">[19]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="484" x="2039.5" y="4263.541">if(transferStatusValid) Group into M Payee DFSPs</text><path d="M581,4298.375 L650,4298.375 L650,4317.375 L640,4327.375 L581,4327.375 L581,4298.375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2475.4219" style="stroke: #000000; stroke-width: 2.0;" width="2489.5" x="581" y="4298.375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="596" y="4322.2129">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="665" y="4323.2129">[if (!autoAcceptParty)]</text><path d="M591,4347.7188 L660,4347.7188 L660,4366.7188 L650,4376.7188 L591,4376.7188 L591,4347.7188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2419.0781" style="stroke: #000000; stroke-width: 2.0;" width="2469.5" x="591" y="4347.7188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="606" y="4371.5566">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="675" y="4372.5566">[if (synchronous)]</text><polygon fill="#383838" points="1531.5,4419.7344,1521.5,4423.7344,1531.5,4427.7344,1527.5,4423.7344" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1525.5" x2="1989.5" y1="4423.7344" y2="4423.7344"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="4416.9004">[20]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="387" x="1579.5" y="4416.9004">Response &lt;bulkPartyLookupResponse&gt;</text><polygon fill="#383838" points="1061.5,4461.4063,1051.5,4465.4063,1061.5,4469.4063,1057.5,4465.4063" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1055.5" x2="1519.5" y1="4465.4063" y2="4465.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="4458.5723">[21]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="387" x="1109.5" y="4458.5723">Response &lt;bulkPartyLookupResponse&gt;</text><polygon fill="#383838" points="660.5,4503.0781,650.5,4507.0781,660.5,4511.0781,656.5,4507.0781" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="654.5" x2="1049.5" y1="4507.0781" y2="4507.0781"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="666.5" y="4500.2441">[22]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="235" x="708.5" y="4500.2441">Present Party Response</text><polygon fill="#383838" points="1038.5,4544.75,1048.5,4548.75,1038.5,4552.75,1042.5,4548.75" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="649.5" x2="1044.5" y1="4548.75" y2="4548.75"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="656.5" y="4541.916">[23]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="124" x="698.5" y="4541.916">Accept Party</text><polygon fill="#383838" points="1508.5,4586.4219,1518.5,4590.4219,1508.5,4594.4219,1512.5,4590.4219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1050.5" x2="1514.5" y1="4590.4219" y2="4590.4219"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1057.5" y="4583.5879">[24]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1099.5" y="4583.5879">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1151.5" y="4583.5879">/bulkTransfers/{bulkTransferId}</text><polygon fill="#383838" points="1978.5,4628.0938,1988.5,4632.0938,1978.5,4636.0938,1982.5,4632.0938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1520.5" x2="1984.5" y1="4632.0938" y2="4632.0938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1527.5" y="4625.2598">[25]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1569.5" y="4625.2598">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1621.5" y="4625.2598">/bulkTransfers/{bulkTransferId}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="591" x2="3060.5" y1="4641.0938" y2="4641.0938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="596" y="4663.9316">[if (!synchronous)]</text><polygon fill="#383838" points="1531.5,5396.2344,1521.5,5400.2344,1531.5,5404.2344,1527.5,5400.2344" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1525.5" x2="1989.5" y1="5400.2344" y2="5400.2344"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="5393.4004">[26]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1579.5" y="5393.4004">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1631.5" y="5393.4004">/bulkTransfers/{bulkTransferId}</text><path d="M1995,4674.7656 L1995,6095.7656 L3041,6095.7656 L3041,4684.7656 L3031,4674.7656 L1995,4674.7656 " fill="#ECECEC" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M3031,4674.7656 L3031,4684.7656 L3041,4684.7656 L3031,4674.7656 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="276" x="2001" y="4702.6035">bulkPartyLookupResponse</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2001" y="4730.2754">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="519" x="2013" y="4757.9473">"bulkHomeTransactionID": "string", # external identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="106" x="2013" y="4785.6191">"options": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="375" x="2037" y="4813.291">"onlyValidateParty": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="2037" y="4840.9629">"autoAcceptParty": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="256" x="2061" y="4868.6348">"enabled": "true" # boolean</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2037" y="4896.3066">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="203" x="2037" y="4923.9785">"autoAcceptQuote": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="276" x="2061" y="4951.6504">"enabled": "true", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="965" x="2061" y="4979.3223">"transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2037" y="5006.9941">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="367" x="2037" y="5034.666">"skipPartyLookup": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="328" x="2037" y="5062.3379">"synchronous": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="546" x="2037" y="5090.0098">"bulkExpiration": DateTime, # expiration date time (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2013" y="5117.6816">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="419" x="2013" y="5145.3535">"from": { "partyIdInfo": {} # (partyIdInfo type)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2061" y="5173.0254">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="206" x="2013" y="5200.6973">"individualtransfers": [</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2061" y="5228.3691">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="692" x="2073" y="5256.041">"homeTransactionId": "string", # Payer DFSP CBS Transaction identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="495" x="2073" y="5283.7129">"transactionId": "UUID", # Created by ML connector</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="425" x="2073" y="5311.3848">"reference": "string", # Payer Loan reference</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="54" x="2073" y="5339.0566">"to": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="2085" y="5366.7285">"partyIdInfo": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="252" x="2097" y="5394.4004">"partyIdType": "MSISDN",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="233" x="2097" y="5422.0723">"partyIdentifier": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="279" x="2097" y="5449.7441">"partySubIdOrType": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="150" x="2097" y="5477.416">"fspId": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2097" y="5505.0879">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2085" y="5532.7598">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="533" x="2073" y="5560.4316">"amountType": "RECEIVE" # SEND, RECEIVE (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="269" x="2073" y="5588.1035">"currency" : "XXX" # (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="336" x="2073" y="5615.7754">"amount": "100.0", # money (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="2073" y="5643.4473">"note": "string"</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="592" x="2073" y="5671.1191">"quoteRequestExtensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="605" x="2073" y="5698.791">"transferRequestExtensions": [{ "key": "string", "value": "string"}]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="117" x="2073" y="5726.4629">"lastError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="2085" y="5754.1348">"httpStatusCode": 0,</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="173" x="2085" y="5781.8066">"mojaloopError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="190" x="2097" y="5809.4785">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="209" x="2109" y="5837.1504">"errorCode": "8812",1</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="257" x="2109" y="5864.8223">"errorDescription": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2109" y="5892.4941">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2097" y="5920.166">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2085" y="5947.8379">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2073" y="5975.5098">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2061" y="6003.1816">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="12" x="2013" y="6030.8535">],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="455" x="2013" y="6058.5254">"extensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2001" y="6086.1973">}</text><polygon fill="#383838" points="1978.5,6134.7031,1988.5,6138.7031,1978.5,6142.7031,1982.5,6138.7031" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1520.5" x2="1984.5" y1="6138.7031" y2="6138.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1527.5" y="6131.8691">[27]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1569.5" y="6131.8691">Receive HTTP 202 response</text><polygon fill="#383838" points="1061.5,6176.375,1051.5,6180.375,1061.5,6184.375,1057.5,6180.375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1055.5" x2="1519.5" y1="6180.375" y2="6180.375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="6173.541">[28]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1109.5" y="6173.541">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1161.5" y="6173.541">/bulkTransfers/{bulkTransferId}</text><polygon fill="#383838" points="1508.5,6218.0469,1518.5,6222.0469,1508.5,6226.0469,1512.5,6222.0469" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1050.5" x2="1514.5" y1="6222.0469" y2="6222.0469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1057.5" y="6215.2129">[29]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1099.5" y="6215.2129">Receive HTTP 202 response</text><polygon fill="#383838" points="660.5,6259.7188,650.5,6263.7188,660.5,6267.7188,656.5,6263.7188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="654.5" x2="1049.5" y1="6263.7188" y2="6263.7188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="666.5" y="6256.8848">[30]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="235" x="708.5" y="6256.8848">Present Party Response</text><polygon fill="#383838" points="1038.5,6301.3906,1048.5,6305.3906,1038.5,6309.3906,1042.5,6305.3906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="649.5" x2="1044.5" y1="6305.3906" y2="6305.3906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="656.5" y="6298.5566">[31]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="124" x="698.5" y="6298.5566">Accept Party</text><polygon fill="#383838" points="1508.5,6343.0625,1518.5,6347.0625,1508.5,6351.0625,1512.5,6347.0625" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1050.5" x2="1514.5" y1="6347.0625" y2="6347.0625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1057.5" y="6340.2285">[32]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1099.5" y="6340.2285">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1151.5" y="6340.2285">/bulkTransfers/{bulkTransferId}</text><polygon fill="#383838" points="1978.5,6528.0938,1988.5,6532.0938,1978.5,6536.0938,1982.5,6532.0938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1520.5" x2="1984.5" y1="6532.0938" y2="6532.0938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1527.5" y="6525.2598">[33]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1569.5" y="6525.2598">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1621.5" y="6525.2598">/bulkTransfers/{bulkTransferId}</text><path d="M726,6360.0625 L726,6674.0625 L1511,6674.0625 L1511,6370.0625 L1501,6360.0625 L726,6360.0625 " fill="#ECECEC" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M1501,6360.0625 L1501,6370.0625 L1511,6370.0625 L1501,6360.0625 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="384" x="732" y="6387.9004">bulkTransferContinuationAcceptParty</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="732" y="6415.5723">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="519" x="744" y="6443.2441">"bulkHomeTransactionID": "string", # external identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="206" x="744" y="6470.916">"individualtransfers": [</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="792" y="6498.5879">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="692" x="804" y="6526.2598">"homeTransactionId": "string", # Payer DFSP CBS Transaction identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="495" x="804" y="6553.9316">"transactionId": "UUID", # Created by ML connector</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="310" x="804" y="6581.6035">"acceptParty": "true" # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="792" y="6609.2754">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="12" x="744" y="6636.9473">],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="732" y="6664.6191">}</text><polygon fill="#383838" points="1531.5,6713.125,1521.5,6717.125,1531.5,6721.125,1527.5,6717.125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1525.5" x2="1989.5" y1="6717.125" y2="6717.125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="6710.291">[34]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1579.5" y="6710.291">Receive HTTP 202 response</text><polygon fill="#383838" points="1061.5,6754.7969,1051.5,6758.7969,1061.5,6762.7969,1057.5,6758.7969" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1055.5" x2="1519.5" y1="6758.7969" y2="6758.7969"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="6751.9629">[35]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1109.5" y="6751.9629">Receive HTTP 202 response</text><path d="M1736,6787.7969 L1825,6787.7969 L1825,6806.7969 L1815,6816.7969 L1736,6816.7969 L1736,6787.7969 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1168.8281" style="stroke: #000000; stroke-width: 2.0;" width="2328.5" x="1736" y="6787.7969"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="1751" y="6811.6348">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="729" x="1840" y="6812.6348">[Quote Processing (M times &amp; within bulkExpiration timelimit in parallel)]</text><polygon fill="#ECECEC" filter="url(#flsroffefztak)" points="1756,6835.1406,1975,6835.1406,1985,6866.1406,1975,6898.1406,1756,6898.1406,1746,6866.1406,1756,6835.1406" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="215" x="1758" y="6861.9785">For each payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="153" x="1758" y="6889.6504">in bulk message</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="6937.1563" y2="6937.1563"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="6937.1563" y2="6950.1563"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="6950.1563" y2="6950.1563"/><polygon fill="#383838" points="2001.5,6946.1563,1991.5,6950.1563,2001.5,6954.1563,1997.5,6950.1563" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="6930.3223">[36]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="199" x="2039.5" y="6930.3223">Check bulkExpiration</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="6991.8281" y2="6991.8281"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="6991.8281" y2="7004.8281"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="7004.8281" y2="7004.8281"/><polygon fill="#383838" points="2001.5,7000.8281,1991.5,7004.8281,2001.5,7008.8281,1997.5,7004.8281" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="6984.9941">[37]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="239" x="2039.5" y="6984.9941">Create bulkTransactionId</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="7101.8438" y2="7101.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="7101.8438" y2="7114.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="7114.8438" y2="7114.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2001.5" y1="7114.8438" y2="7110.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2001.5" y1="7114.8438" y2="7118.8438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="7067.3379">[38]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="194" x="2039.5" y="7039.666">Calculate bulk expiry</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="391" x="2039.5" y="7067.3379">based on both expirySeconds config and</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="133" x="2039.5" y="7095.0098">bulkExpiration</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2528.5" x2="2518.5" y1="7156.5156" y2="7152.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2528.5" x2="2518.5" y1="7156.5156" y2="7160.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1995.5" x2="2529.5" y1="7156.5156" y2="7156.5156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2002.5" y="7149.6816">[39]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="2044.5" y="7149.6816">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="108" x="2112.5" y="7149.6816">/bulkquotes</text><polygon fill="#383838" points="3327.5,7194.1875,3337.5,7198.1875,3327.5,7202.1875,3331.5,7198.1875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="3333.5" y1="7198.1875" y2="7198.1875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="7191.3535">[40]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="2579.5" y="7191.3535">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="108" x="2647.5" y="7191.3535">/bulkquotes</text><polygon fill="#383838" points="3963.5,7263.5313,3973.5,7267.5313,3963.5,7271.5313,3967.5,7267.5313" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="7267.5313" y2="7267.5313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="7246.8613">[41]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="3388.5" y="7233.0254">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="427" x="3441.5" y="7233.0254">/functionSupport?HasSupportForBulkQuotes</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="545" x="3394.5" y="7260.6973"># check to see if the core connector supports bulk quotes</text><polygon fill="#383838" points="3350.5,7305.2031,3340.5,7309.2031,3350.5,7313.2031,3346.5,7309.2031" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3344.5" x2="3974.5" y1="7309.2031" y2="7309.2031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3356.5" y="7302.3691">[42]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="351" x="3398.5" y="7302.3691">Reponse HasSupportForBulkQuotes</text><path d="M3260.5,7324.2031 L3329.5,7324.2031 L3329.5,7343.2031 L3319.5,7353.2031 L3260.5,7353.2031 L3260.5,7324.2031 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="459.7344" style="stroke: #000000; stroke-width: 2.0;" width="794" x="3260.5" y="7324.2031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="3275.5" y="7348.041">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="322" x="3344.5" y="7349.041">[if (HasSupportForBulkQuotes)]</text><polygon fill="#383838" points="3963.5,7396.2188,3973.5,7400.2188,3963.5,7404.2188,3967.5,7400.2188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="7400.2188" y2="7400.2188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="7393.3848">[43]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="3388.5" y="7393.3848">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="108" x="3456.5" y="7393.3848">/bulkquotes</text><polygon fill="#383838" points="3350.5,7437.8906,3340.5,7441.8906,3350.5,7445.8906,3346.5,7441.8906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3344.5" x2="3974.5" y1="7441.8906" y2="7441.8906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3356.5" y="7435.0566">[44]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="299" x="3398.5" y="7435.0566">Reponse bulkquotes Response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3381.5" y1="7511.2344" y2="7511.2344"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3381.5" x2="3381.5" y1="7511.2344" y2="7524.2344"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3340.5" x2="3381.5" y1="7524.2344" y2="7524.2344"/><polygon fill="#383838" points="3350.5,7520.2344,3340.5,7524.2344,3350.5,7528.2344,3346.5,7524.2344" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="7490.5645">[45]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="267" x="3388.5" y="7476.7285">Update transaction statuses</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="265" x="3388.5" y="7504.4004">and attach quote responses</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3260.5" x2="4054.5" y1="7533.2344" y2="7533.2344"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="329" x="3265.5" y="7556.0723">[if (!HasSupportForBulkQuotes)]</text><path d="M3270.5,7568.9063 L3359.5,7568.9063 L3359.5,7587.9063 L3349.5,7597.9063 L3270.5,7597.9063 L3270.5,7568.9063 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="208.0313" style="stroke: #000000; stroke-width: 2.0;" width="774" x="3270.5" y="7568.9063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="3285.5" y="7592.7441">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="3374.5" y="7593.7441">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="3963.5,7640.9219,3973.5,7644.9219,3963.5,7648.9219,3967.5,7644.9219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="7644.9219" y2="7644.9219"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="7638.0879">[46]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="3388.5" y="7638.0879">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="142" x="3456.5" y="7638.0879">/quoterequests</text><polygon fill="#383838" points="3350.5,7682.5938,3340.5,7686.5938,3350.5,7690.5938,3346.5,7686.5938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3344.5" x2="3974.5" y1="7686.5938" y2="7686.5938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3356.5" y="7679.7598">[47]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="3398.5" y="7679.7598">response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3381.5" y1="7755.9375" y2="7755.9375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3381.5" x2="3381.5" y1="7755.9375" y2="7768.9375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3340.5" x2="3381.5" y1="7768.9375" y2="7768.9375"/><polygon fill="#383838" points="3350.5,7764.9375,3340.5,7768.9375,3350.5,7772.9375,3346.5,7768.9375" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="7735.2676">[48]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="3388.5" y="7721.4316">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="254" x="3388.5" y="7749.1035">and attach quote response</text><polygon fill="#383838" points="2541.5,7820.6094,2531.5,7824.6094,2541.5,7828.6094,2537.5,7824.6094" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2535.5" x2="3338.5" y1="7824.6094" y2="7824.6094"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2547.5" y="7817.7754">[49]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="2589.5" y="7817.7754">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="145" x="2641.5" y="7817.7754">/bulkquotes/{id)</text><polygon fill="#383838" points="2001.5,7862.2813,1991.5,7866.2813,2001.5,7870.2813,1997.5,7866.2813" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1995.5" x2="2529.5" y1="7866.2813" y2="7866.2813"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2007.5" y="7859.4473">[50]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="2049.5" y="7859.4473">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="145" x="2101.5" y="7859.4473">/bulkquotes/{id)</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="7935.625" y2="7935.625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="7935.625" y2="7948.625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="7948.625" y2="7948.625"/><polygon fill="#383838" points="2001.5,7944.625,1991.5,7948.625,2001.5,7952.625,1997.5,7948.625" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="7914.9551">[51]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="2039.5" y="7901.1191">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="254" x="2039.5" y="7928.791">and attach quote response</text><path d="M581,7970.625 L650,7970.625 L650,7989.625 L640,7999.625 L581,7999.625 L581,7970.625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2779.8125" style="stroke: #000000; stroke-width: 2.0;" width="2489.5" x="581" y="7970.625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="596" y="7994.4629">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="231" x="665" y="7995.4629">[if (!autoAcceptQuote)]</text><path d="M591,8019.9688 L660,8019.9688 L660,8038.9688 L650,8048.9688 L591,8048.9688 L591,8019.9688 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="2723.4688" style="stroke: #000000; stroke-width: 2.0;" width="2469.5" x="591" y="8019.9688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="606" y="8043.8066">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="675" y="8044.8066">[if (synchronous)]</text><polygon fill="#383838" points="1531.5,8091.9844,1521.5,8095.9844,1531.5,8099.9844,1527.5,8095.9844" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1525.5" x2="1989.5" y1="8095.9844" y2="8095.9844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="8089.1504">[52]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="404" x="1579.5" y="8089.1504">Response &lt;bulkQuoteRequestResponse&gt;</text><polygon fill="#383838" points="1061.5,8133.6563,1051.5,8137.6563,1061.5,8141.6563,1057.5,8137.6563" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1055.5" x2="1519.5" y1="8137.6563" y2="8137.6563"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="8130.8223">[53]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="404" x="1109.5" y="8130.8223">Response &lt;bulkQuoteRequestResponse&gt;</text><polygon fill="#383838" points="660.5,8175.3281,650.5,8179.3281,660.5,8183.3281,656.5,8179.3281" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="654.5" x2="1049.5" y1="8179.3281" y2="8179.3281"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="666.5" y="8172.4941">[54]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="243" x="708.5" y="8172.4941">Present Quote Response</text><polygon fill="#383838" points="1038.5,8217,1048.5,8221,1038.5,8225,1042.5,8221" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="649.5" x2="1044.5" y1="8221" y2="8221"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="656.5" y="8214.166">[55]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="132" x="698.5" y="8214.166">Accept Quote</text><polygon fill="#383838" points="1508.5,8258.6719,1518.5,8262.6719,1508.5,8266.6719,1512.5,8262.6719" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1050.5" x2="1514.5" y1="8262.6719" y2="8262.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1057.5" y="8255.8379">[56]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1099.5" y="8255.8379">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1151.5" y="8255.8379">/bulkTransfers/{bulkTransferId}</text><polygon fill="#383838" points="1978.5,8300.3438,1988.5,8304.3438,1978.5,8308.3438,1982.5,8304.3438" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1520.5" x2="1984.5" y1="8304.3438" y2="8304.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1527.5" y="8297.5098">[57]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1569.5" y="8297.5098">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1621.5" y="8297.5098">/bulkTransfers/{bulkTransferId}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="591" x2="3060.5" y1="8313.3438" y2="8313.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="596" y="8336.1816">[if (!synchronous)]</text><polygon fill="#383838" points="1531.5,9220.6797,1521.5,9224.6797,1531.5,9228.6797,1527.5,9224.6797" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1525.5" x2="1989.5" y1="9224.6797" y2="9224.6797"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="9217.8457">[58]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1579.5" y="9217.8457">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1631.5" y="9217.8457">/bulkTransfers/{bulkTransferId}</text><path d="M1995,8347.0156 L1995,10072.0156 L3041,10072.0156 L3041,8357.0156 L3031,8347.0156 L1995,8347.0156 " fill="#ECECEC" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M3031,8347.0156 L3031,8357.0156 L3041,8357.0156 L3031,8347.0156 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="293" x="2001" y="8374.8535">bulkQuoteRequestResponse</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2001" y="8402.5254">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="519" x="2013" y="8430.1973">"bulkHomeTransactionID": "string", # external identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="106" x="2013" y="8457.8691">"options": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="375" x="2037" y="8485.541">"onlyValidateParty": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="2037" y="8513.2129">"autoAcceptParty": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="256" x="2061" y="8540.8848">"enabled": "true" # boolean</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2037" y="8568.5566">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="203" x="2037" y="8596.2285">"autoAcceptQuote": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="276" x="2061" y="8623.9004">"enabled": "true", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="965" x="2061" y="8651.5723">"transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2037" y="8679.2441">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="367" x="2037" y="8706.916">"skipPartyLookup": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="328" x="2037" y="8734.5879">"synchronous": "fase", # (boolean)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="546" x="2037" y="8762.2598">"bulkExpiration": DateTime, # expiration date time (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2013" y="8789.9316">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="419" x="2013" y="8817.6035">"from": { "partyIdInfo": {} # (partyIdInfo type)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2061" y="8845.2754">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="206" x="2013" y="8872.9473">"individualtransfers": [</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2061" y="8900.6191">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="692" x="2073" y="8928.291">"homeTransactionId": "string", # Payer DFSP CBS Transaction identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="495" x="2073" y="8955.9629">"transactionId": "UUID", # Created by ML connector</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="425" x="2073" y="8983.6348">"reference": "string", # Payer Loan reference</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="54" x="2073" y="9011.3066">"to": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="2085" y="9038.9785">"partyIdInfo": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="252" x="2097" y="9066.6504">"partyIdType": "MSISDN",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="233" x="2097" y="9094.3223">"partyIdentifier": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="279" x="2097" y="9121.9941">"partySubIdOrType": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="150" x="2097" y="9149.666">"fspId": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2097" y="9177.3379">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2085" y="9205.0098">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="533" x="2073" y="9232.6816">"amountType": "RECEIVE" # SEND, RECEIVE (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="269" x="2073" y="9260.3535">"currency" : "XXX" # (Enum)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="336" x="2073" y="9288.0254">"amount": "100.0", # money (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="2073" y="9315.6973">"note": "string"</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="592" x="2073" y="9343.3691">"quoteRequestExtensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="611" x="2073" y="9371.041">"transferRequestExtensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="187" x="2073" y="9398.7129">"quoteResponse": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="517" x="2085" y="9426.3848">"transferAmount": {"currency": "AED","amount": "0.7"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="606" x="2085" y="9454.0566">"payeeReceiveAmount": {"currency": "AED","amount": "0.922"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="568" x="2085" y="9481.7285">"payeeFspFee": {"currency": "AED","amount": "67247160"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="664" x="2085" y="9509.4004">"payeeFspCommission": {"currency": "AED","amount": "829358883"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="460" x="2085" y="9537.0723">"expiration": "6286-11-29T16:19:08.300+06:14",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="506" x="2085" y="9564.7441">"geoCode": {"latitude": "5.9","longitude": "180.0000"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="468" x="2085" y="9592.416">"ilpPacket": "XqOB5HUGEifQ-ebr0TAVAgD3...",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="279" x="2085" y="9620.0879">"condition": "gZI4iD9u_Yc...",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2085" y="9647.7598">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2073" y="9675.4316">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="117" x="2073" y="9703.1035">"lastError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="2085" y="9730.7754">"httpStatusCode": 0,</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="173" x="2085" y="9758.4473">"mojaloopError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="190" x="2097" y="9786.1191">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="197" x="2109" y="9813.791">"errorCode": "8812",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="257" x="2109" y="9841.4629">"errorDescription": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2109" y="9869.1348">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2097" y="9896.8066">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2085" y="9924.4785">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2073" y="9952.1504">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2061" y="9979.8223">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="12" x="2013" y="10007.4941">],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="455" x="2013" y="10035.166">"extensions": [{ "key": "string", "value": "string"}],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2001" y="10062.8379">}</text><polygon fill="#383838" points="1978.5,10111.3438,1988.5,10115.3438,1978.5,10119.3438,1982.5,10115.3438" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1520.5" x2="1984.5" y1="10115.3438" y2="10115.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1527.5" y="10108.5098">[59]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1569.5" y="10108.5098">Receive HTTP 202 response</text><polygon fill="#383838" points="1061.5,10153.0156,1051.5,10157.0156,1061.5,10161.0156,1057.5,10157.0156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1055.5" x2="1519.5" y1="10157.0156" y2="10157.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="10150.1816">[60]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1109.5" y="10150.1816">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1161.5" y="10150.1816">/bulkTransfers/{bulkTransferId}</text><polygon fill="#383838" points="1508.5,10194.6875,1518.5,10198.6875,1508.5,10202.6875,1512.5,10198.6875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1050.5" x2="1514.5" y1="10198.6875" y2="10198.6875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1057.5" y="10191.8535">[61]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1099.5" y="10191.8535">Receive HTTP 202 response</text><polygon fill="#383838" points="660.5,10236.3594,650.5,10240.3594,660.5,10244.3594,656.5,10240.3594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="654.5" x2="1049.5" y1="10240.3594" y2="10240.3594"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="666.5" y="10233.5254">[62]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="243" x="708.5" y="10233.5254">Present Quote Response</text><polygon fill="#383838" points="1038.5,10278.0313,1048.5,10282.0313,1038.5,10286.0313,1042.5,10282.0313" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="649.5" x2="1044.5" y1="10282.0313" y2="10282.0313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="656.5" y="10275.1973">[63]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="132" x="698.5" y="10275.1973">Accept Quote</text><polygon fill="#383838" points="1508.5,10319.7031,1518.5,10323.7031,1508.5,10327.7031,1512.5,10323.7031" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1050.5" x2="1514.5" y1="10323.7031" y2="10323.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1057.5" y="10316.8691">[64]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1099.5" y="10316.8691">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1151.5" y="10316.8691">/bulkTransfers/{bulkTransferId}</text><polygon fill="#383838" points="1978.5,10504.7344,1988.5,10508.7344,1978.5,10512.7344,1982.5,10508.7344" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1520.5" x2="1984.5" y1="10508.7344" y2="10508.7344"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1527.5" y="10501.9004">[65]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1569.5" y="10501.9004">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1621.5" y="10501.9004">/bulkTransfers/{bulkTransferId}</text><path d="M726,10336.7031 L726,10650.7031 L1511,10650.7031 L1511,10346.7031 L1501,10336.7031 L726,10336.7031 " fill="#ECECEC" filter="url(#flsroffefztak)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M1501,10336.7031 L1501,10346.7031 L1511,10346.7031 L1501,10336.7031 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="732" y="10364.541">bulkAcceptQuote</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="732" y="10392.2129">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="519" x="744" y="10419.8848">"bulkHomeTransactionID": "string", # external identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="206" x="744" y="10447.5566">"individualtransfers": [</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="792" y="10475.2285">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="692" x="804" y="10502.9004">"homeTransactionId": "string", # Payer DFSP CBS Transaction identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="495" x="804" y="10530.5723">"transactionId": "UUID", # Created by ML connector</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="298" x="804" y="10558.2441">"acceptQuote": "true" #boolean</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="792" y="10585.916">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="12" x="744" y="10613.5879">],</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="732" y="10641.2598">}</text><polygon fill="#383838" points="1531.5,10689.7656,1521.5,10693.7656,1531.5,10697.7656,1527.5,10693.7656" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1525.5" x2="1989.5" y1="10693.7656" y2="10693.7656"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="10686.9316">[66]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1579.5" y="10686.9316">Receive HTTP 202 response</text><polygon fill="#383838" points="1061.5,10731.4375,1051.5,10735.4375,1061.5,10739.4375,1057.5,10735.4375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1055.5" x2="1519.5" y1="10735.4375" y2="10735.4375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="10728.6035">[67]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1109.5" y="10728.6035">Receive HTTP 202 response</text><path d="M1736,10764.4375 L1825,10764.4375 L1825,10783.4375 L1815,10793.4375 L1736,10793.4375 L1736,10764.4375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1797.5938" style="stroke: #000000; stroke-width: 2.0;" width="2348.5" x="1736" y="10764.4375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="1751" y="10788.2754">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="760" x="1840" y="10789.2754">[Transfer Processing (M times &amp; within bulkExpiration timelimit  in parallel)]</text><polygon fill="#ECECEC" filter="url(#flsroffefztak)" points="1756,10811.7813,1975,10811.7813,1985,10842.7813,1975,10874.7813,1756,10874.7813,1746,10842.7813,1756,10811.7813" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="215" x="1758" y="10838.6191">For each payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="153" x="1758" y="10866.291">in bulk message</text><path d="M1921.5,10887.125 L1990.5,10887.125 L1990.5,10906.125 L1980.5,10916.125 L1921.5,10916.125 L1921.5,10887.125 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="152.3594" style="stroke: #000000; stroke-width: 2.0;" width="520" x="1921.5" y="10887.125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="1936.5" y="10910.9629">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="2005.5" y="10911.9629">[if (AutoAcceptQuote)]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="11018.4844" y2="11018.4844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="11018.4844" y2="11031.4844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="11031.4844" y2="11031.4844"/><polygon fill="#383838" points="2001.5,11027.4844,1991.5,11031.4844,2001.5,11035.4844,1997.5,11031.4844" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="10983.9785">[68]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="374" x="2039.5" y="10956.3066">Confirm Fees meets auto accept levels</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="378" x="2045.5" y="10983.9785">and bulkExpiration timelimit not reached</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="250" x="2039.5" y="11011.6504">-&gt; Update Transfer Status</text><path d="M1921.5,11053.4844 L1990.5,11053.4844 L1990.5,11072.4844 L1980.5,11082.4844 L1921.5,11082.4844 L1921.5,11053.4844 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1501.5469" style="stroke: #000000; stroke-width: 2.0;" width="2153" x="1921.5" y="11053.4844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="1936.5" y="11077.3223">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="204" x="2005.5" y="11078.3223">[if (AcceptedQuote)]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="11184.8438" y2="11184.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="11184.8438" y2="11197.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="11197.8438" y2="11197.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2001.5" y1="11197.8438" y2="11193.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2001.5" y1="11197.8438" y2="11201.8438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="11150.3379">[69]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="194" x="2039.5" y="11122.666">Calculate bulk expiry</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="391" x="2039.5" y="11150.3379">based on both expirySeconds config and</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="133" x="2039.5" y="11178.0098">bulkExpiration</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2528.5" x2="2518.5" y1="11239.5156" y2="11235.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2528.5" x2="2518.5" y1="11239.5156" y2="11243.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1995.5" x2="2529.5" y1="11239.5156" y2="11239.5156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2002.5" y="11232.6816">[70]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="2044.5" y="11232.6816">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="2112.5" y="11232.6816">/bulktransfers</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="2572.5" y1="11281.1875" y2="11281.1875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2572.5" x2="2572.5" y1="11281.1875" y2="11294.1875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2531.5" x2="2572.5" y1="11294.1875" y2="11294.1875"/><polygon fill="#383838" points="2541.5,11290.1875,2531.5,11294.1875,2541.5,11298.1875,2537.5,11294.1875" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="11274.3535">[71]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="496" x="2579.5" y="11274.3535">Perform liquidity(NDC)check at indivial transfer level</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="2572.5" y1="11335.8594" y2="11335.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2572.5" x2="2572.5" y1="11335.8594" y2="11348.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2531.5" x2="2572.5" y1="11348.8594" y2="11348.8594"/><polygon fill="#383838" points="2541.5,11344.8594,2531.5,11348.8594,2541.5,11352.8594,2537.5,11348.8594" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="11329.0254">[72]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="368" x="2579.5" y="11329.0254">Reserve Funds at indivial transfer level</text><line style="stroke: #383838; stroke-width: 1.0;" x1="3337.5" x2="3327.5" y1="11390.5313" y2="11386.5313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3337.5" x2="3327.5" y1="11390.5313" y2="11394.5313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="3338.5" y1="11390.5313" y2="11390.5313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="11383.6973">[73]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="2579.5" y="11383.6973">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="2647.5" y="11383.6973">/bulktransfers</text><polygon fill="#383838" points="3963.5,11455.875,3973.5,11459.875,3963.5,11463.875,3967.5,11459.875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="11459.875" y2="11459.875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="11439.2051">[74]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="3388.5" y="11425.3691">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="449" x="3441.5" y="11425.3691">/functionSupport?HasSupportForBulkTransfers</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="564" x="3394.5" y="11453.041"># check to see if the core connector supports bulk transfers</text><path d="M3260.5,11474.875 L3329.5,11474.875 L3329.5,11493.875 L3319.5,11503.875 L3260.5,11503.875 L3260.5,11474.875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="459.7344" style="stroke: #000000; stroke-width: 2.0;" width="794" x="3260.5" y="11474.875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="3275.5" y="11498.7129">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="347" x="3344.5" y="11499.7129">[if (HasSupportForBulkTransfers)]</text><polygon fill="#383838" points="3963.5,11546.8906,3973.5,11550.8906,3963.5,11554.8906,3967.5,11550.8906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="11550.8906" y2="11550.8906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="11544.0566">[75]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="3388.5" y="11544.0566">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="3456.5" y="11544.0566">/bulktransfers</text><polygon fill="#383838" points="3350.5,11588.5625,3340.5,11592.5625,3350.5,11596.5625,3346.5,11592.5625" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3344.5" x2="3974.5" y1="11592.5625" y2="11592.5625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3356.5" y="11585.7285">[76]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="3398.5" y="11585.7285">response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3381.5" y1="11661.9063" y2="11661.9063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3381.5" x2="3381.5" y1="11661.9063" y2="11674.9063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3340.5" x2="3381.5" y1="11674.9063" y2="11674.9063"/><polygon fill="#383838" points="3350.5,11670.9063,3340.5,11674.9063,3350.5,11678.9063,3346.5,11674.9063" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="11641.2363">[77]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="267" x="3388.5" y="11627.4004">Update transaction statuses</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="284" x="3388.5" y="11655.0723">and attach transfer responses</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3260.5" x2="4054.5" y1="11683.9063" y2="11683.9063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="354" x="3265.5" y="11706.7441">[if (!HasSupportForBulkTransfers)]</text><path d="M3270.5,11719.5781 L3359.5,11719.5781 L3359.5,11738.5781 L3349.5,11748.5781 L3270.5,11748.5781 L3270.5,11719.5781 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="208.0313" style="stroke: #000000; stroke-width: 2.0;" width="774" x="3270.5" y="11719.5781"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="3285.5" y="11743.416">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="3374.5" y="11744.416">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="3963.5,11791.5938,3973.5,11795.5938,3963.5,11799.5938,3967.5,11795.5938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="11795.5938" y2="11795.5938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="11788.7598">[78]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="3388.5" y="11788.7598">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="3456.5" y="11788.7598">/transfers</text><polygon fill="#383838" points="3350.5,11833.2656,3340.5,11837.2656,3350.5,11841.2656,3346.5,11837.2656" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3344.5" x2="3974.5" y1="11837.2656" y2="11837.2656"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3356.5" y="11830.4316">[79]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="3398.5" y="11830.4316">response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3381.5" y1="11906.6094" y2="11906.6094"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3381.5" x2="3381.5" y1="11906.6094" y2="11919.6094"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3340.5" x2="3381.5" y1="11919.6094" y2="11919.6094"/><polygon fill="#383838" points="3350.5,11915.6094,3340.5,11919.6094,3350.5,11923.6094,3346.5,11919.6094" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="11885.9395">[80]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="3388.5" y="11872.1035">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="273" x="3388.5" y="11899.7754">and attach transfer response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="2540.5" y1="11975.2813" y2="11971.2813"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="2540.5" y1="11975.2813" y2="11979.2813"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="3338.5" y1="11975.2813" y2="11975.2813"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2547.5" y="11968.4473">[81]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="2589.5" y="11968.4473">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="285" x="2641.5" y="11968.4473">/bulktransfers/{id} (BulkStatus)</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2530.5" x2="2572.5" y1="12016.9531" y2="12016.9531"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2572.5" x2="2572.5" y1="12016.9531" y2="12029.9531"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="2531.5" x2="2572.5" y1="12029.9531" y2="12029.9531"/><polygon fill="#383838" points="2541.5,12025.9531,2531.5,12029.9531,2541.5,12033.9531,2537.5,12029.9531" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="12010.1191">[82]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="357" x="2579.5" y="12010.1191">Commit funds at indivial transfer level</text><path d="M2466.5,12044.9531 L2535.5,12044.9531 L2535.5,12063.9531 L2525.5,12073.9531 L2466.5,12073.9531 L2466.5,12044.9531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="379.0625" style="stroke: #000000; stroke-width: 2.0;" width="1598" x="2466.5" y="12044.9531"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="2481.5" y="12068.791">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="318" x="2550.5" y="12069.791">[if (bulkStatus == 'Processing')]</text><polygon fill="#383838" points="3327.5,12116.9688,3337.5,12120.9688,3327.5,12124.9688,3331.5,12120.9688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2530.5" x2="3333.5" y1="12120.9688" y2="12120.9688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2537.5" y="12114.1348">[83]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="2579.5" y="12114.1348">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="285" x="2662.5" y="12114.1348">/bulktransfers/{id} (BulkStatus)</text><polygon fill="#383838" points="3963.5,12186.3125,3973.5,12190.3125,3963.5,12194.3125,3967.5,12190.3125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="12190.3125" y2="12190.3125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="12169.6426">[84]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="3388.5" y="12155.8066">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="449" x="3441.5" y="12155.8066">/functionSupport?HasSupportForBulkTransfers</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="564" x="3394.5" y="12183.4785"># check to see if the core connector supports bulk transfers</text><path d="M3260.5,12205.3125 L3329.5,12205.3125 L3329.5,12224.3125 L3319.5,12234.3125 L3260.5,12234.3125 L3260.5,12205.3125 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="211.7031" style="stroke: #000000; stroke-width: 2.0;" width="794" x="3260.5" y="12205.3125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="3275.5" y="12229.1504">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="347" x="3344.5" y="12230.1504">[if (HasSupportForBulkTransfers)]</text><polygon fill="#383838" points="3963.5,12277.3281,3973.5,12281.3281,3963.5,12285.3281,3967.5,12281.3281" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="12281.3281" y2="12281.3281"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="12274.4941">[85]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="3388.5" y="12274.4941">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="283" x="3471.5" y="12274.4941">/bulktransfers/{bulkTransferId}</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="3260.5" x2="4054.5" y1="12290.3281" y2="12290.3281"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="354" x="3265.5" y="12313.166">[if (!HasSupportForBulkTransfers)]</text><path d="M3270.5,12326 L3359.5,12326 L3359.5,12345 L3349.5,12355 L3270.5,12355 L3270.5,12326 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="84.0156" style="stroke: #000000; stroke-width: 2.0;" width="774" x="3270.5" y="12326"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="3285.5" y="12349.8379">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="3374.5" y="12350.8379">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="3963.5,12398.0156,3973.5,12402.0156,3963.5,12406.0156,3967.5,12402.0156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="3339.5" x2="3969.5" y1="12402.0156" y2="12402.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="3346.5" y="12395.1816">[86]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="3388.5" y="12395.1816">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="209" x="3471.5" y="12395.1816">/transfers/{TransferId}</text><polygon fill="#383838" points="2001.5,12460.6875,1991.5,12464.6875,2001.5,12468.6875,1997.5,12464.6875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1995.5" x2="2529.5" y1="12464.6875" y2="12464.6875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2007.5" y="12457.8535">[87]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="2049.5" y="12457.8535">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="164" x="2101.5" y="12457.8535">/bulktransfers/{id}</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1990.5" x2="2032.5" y1="12534.0313" y2="12534.0313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2032.5" x2="2032.5" y1="12534.0313" y2="12547.0313"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1991.5" x2="2032.5" y1="12547.0313" y2="12547.0313"/><polygon fill="#383838" points="2001.5,12543.0313,1991.5,12547.0313,2001.5,12551.0313,1997.5,12547.0313" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1997.5" y="12513.3613">[88]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="2039.5" y="12499.5254">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="327" x="2039.5" y="12527.1973">and attach bulk transfers response</text><polygon fill="#ECECEC" filter="url(#flsroffefztak)" points="2005,12574.0313,2854,12574.0313,2864,13283.0313,2854,13993.0313,2005,13993.0313,1995,13283.0313,2005,12574.0313" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="233" x="2007" y="12600.8691">bulkTransferResponse</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2007" y="12628.541">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="517" x="2013" y="12656.2129">"homeBulkTransactionID": "string", # external identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="546" x="2013" y="12683.8848">"bulkExpiration": DateTime, # expiration date time (string)</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="274" x="2013" y="12711.5566">"individualTransferResults": [</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2031" y="12739.2285">{</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="534" x="2043" y="12766.9004">"transferId": "310e5c51-e4fd-30bc-96ae-6dffee2c54cb",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="692" x="2043" y="12794.5723">"homeTransactionId": "string", # Payer DFSP CBS Transaction identifier</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="809" x="2043" y="12822.2441">"transactionId": "string", # Mojaloop bulk transaction Id used to make the bulk transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="54" x="2043" y="12849.916">"to": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="138" x="2055" y="12877.5879">"partyIdInfo": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="252" x="2067" y="12905.2598">"partyIdType": "MSISDN",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="233" x="2067" y="12932.9316">"partyIdentifier": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="279" x="2067" y="12960.6035">"partySubIdOrType": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="150" x="2067" y="12988.2754">"fspId": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2067" y="13015.9473">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2055" y="13043.6191">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2043" y="13071.291">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="232" x="2043" y="13098.9629">"amountType": "SEND",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="177" x="2043" y="13126.6348">"currency": "AED",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="133" x="2043" y="13154.3066">"amount": "0",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="324" x="2043" y="13181.9785">"transactionType": "TRANSFER",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="144" x="2043" y="13209.6504">"note": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="523" x="2043" y="13237.3223">"quoteId": "4932beab-423e-37b6-8587-49c016d2f5ef",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="187" x="2043" y="13264.9941">"quoteResponse": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="517" x="2055" y="13292.666">"transferAmount": {"currency": "AED","amount": "0.7"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="606" x="2055" y="13320.3379">"payeeReceiveAmount": {"currency": "AED","amount": "0.922"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="568" x="2055" y="13348.0098">"payeeFspFee": {"currency": "AED","amount": "67247160"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="664" x="2055" y="13375.6816">"payeeFspCommission": {"currency": "AED","amount": "829358883"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="460" x="2055" y="13403.3535">"expiration": "6286-11-29T16:19:08.300+06:14",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="506" x="2055" y="13431.0254">"geoCode": {"latitude": "5.9","longitude": "180.0000"},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="468" x="2055" y="13458.6973">"ilpPacket": "XqOB5HUGEifQ-ebr0TAVAgD3...",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="279" x="2055" y="13486.3691">"condition": "gZI4iD9u_Yc...",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2055" y="13514.041">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="13" x="2043" y="13541.7129">},</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="73" x="2043" y="13569.3848">"fulfil": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="310" x="2055" y="13597.0566">"fulfilment": "UXgB0280lbHM...",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="521" x="2055" y="13624.7285">"completedTimestamp": "5138-01-31T21:10:42.484Z",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="310" x="2055" y="13652.4004">"transferState": "COMMITTED",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2055" y="13680.0723">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2043" y="13707.7441">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="117" x="2043" y="13735.416">"lastError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="195" x="2055" y="13763.0879">"httpStatusCode": 0,</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="173" x="2055" y="13790.7598">"mojaloopError": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="190" x="2067" y="13818.4316">"errorInformation": {</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="197" x="2079" y="13846.1035">"errorCode": "8812",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="257" x="2079" y="13873.7754">"errorDescription": "string",</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="593" x="2079" y="13901.4473">"extensionList": {"extension": [{"key": "string","value": "string"}]}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2055" y="13929.1191">}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="33" x="2019" y="13956.791">}}}]]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="2007" y="13984.4629">}</text><path d="M591,14005.2969 L660,14005.2969 L660,14024.2969 L650,14034.2969 L591,14034.2969 L591,14005.2969 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="488.4063" style="stroke: #000000; stroke-width: 2.0;" width="1468.5" x="591" y="14005.2969"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="606" y="14029.1348">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="675" y="14030.1348">[if (synchronous)]</text><polygon fill="#383838" points="1531.5,14077.3125,1521.5,14081.3125,1531.5,14085.3125,1527.5,14081.3125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1525.5" x2="1989.5" y1="14081.3125" y2="14081.3125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="14074.4785">[89]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="346" x="1579.5" y="14074.4785">Response &lt;bulkTransferResponse&gt;</text><polygon fill="#383838" points="1061.5,14118.9844,1051.5,14122.9844,1061.5,14126.9844,1057.5,14122.9844" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1055.5" x2="1519.5" y1="14122.9844" y2="14122.9844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="14116.1504">[90]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="346" x="1109.5" y="14116.1504">Response &lt;bulkTransferResponse&gt;</text><polygon fill="#383838" points="660.5,14160.6563,650.5,14164.6563,660.5,14168.6563,656.5,14164.6563" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="654.5" x2="1049.5" y1="14164.6563" y2="14164.6563"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="666.5" y="14157.8223">[91]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="335" x="708.5" y="14157.8223">Transafer response(success &amp; fail)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="591" x2="2059.5" y1="14173.6563" y2="14173.6563"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="596" y="14196.4941">[if (!synchronous)]</text><polygon fill="#383838" points="1531.5,14287.3438,1521.5,14291.3438,1531.5,14295.3438,1527.5,14291.3438" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1525.5" x2="1989.5" y1="14291.3438" y2="14291.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1537.5" y="14256.8379">[92]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="185" x="1579.5" y="14229.166">Callback Response</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1579.5" y="14256.8379">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1631.5" y="14256.8379">/bulkTransfers/{bulkTransferId}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="332" x="1579.5" y="14284.5098">Transfer Response(success &amp; fail)</text><polygon fill="#383838" points="1978.5,14329.0156,1988.5,14333.0156,1978.5,14337.0156,1982.5,14333.0156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1520.5" x2="1984.5" y1="14333.0156" y2="14333.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1527.5" y="14326.1816">[93]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1569.5" y="14326.1816">Receive HTTP 202 response</text><polygon fill="#383838" points="1061.5,14398.3594,1051.5,14402.3594,1061.5,14406.3594,1057.5,14402.3594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1055.5" x2="1519.5" y1="14402.3594" y2="14402.3594"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1067.5" y="14381.6895">[94]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1109.5" y="14367.8535">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="291" x="1161.5" y="14367.8535">/bulkTransfers/{bulkTransferId}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="377" x="1109.5" y="14395.5254">Transfer Status Update (success &amp; fail)</text><polygon fill="#383838" points="1508.5,14440.0313,1518.5,14444.0313,1508.5,14448.0313,1512.5,14444.0313" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1050.5" x2="1514.5" y1="14444.0313" y2="14444.0313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1057.5" y="14437.1973">[95]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="281" x="1099.5" y="14437.1973">Receive HTTP 202 response</text><polygon fill="#383838" points="660.5,14481.7031,650.5,14485.7031,660.5,14489.7031,656.5,14485.7031" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="654.5" x2="1049.5" y1="14485.7031" y2="14485.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="666.5" y="14478.8691">[96]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="335" x="708.5" y="14478.8691">Transafer response(success &amp; fail)</text><!--MD5=[8db988441ed2de092ff22598961e4b1c]
@startuml
/'*****
- - - - - - - - - - - - - -
******'/

skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 22
skinparam defaultFontSize 22
skinparam noteFontSize 22
skinparam monochrome true
' declare title
' title Bulk Transactions pattern using the Mojaloop Connector
' declare actors
actor "MFI Staff" as MStaff
participant "MFI CBS" as MFI
box "Payment Manager" #LightGrey
participant "Core\nConnector" as MFICC 
participant "Mojaloop\nConnector" as MFIMC 
end box
participant "Mojaloop\nSwitch" as MJW 
participant "Oracle" as Oracle
box "Payment Manager" #LightGrey
participant "Payee\nMojaloop\nConnector" as PayeeFSPMC 
participant "Payee\nCore\nConnector" as PayeeFSPCC 
end box

== Bulk Transfers implemented using Mojaloop bulk transfers ==

autonumber 1 1 "<b>[0]"
MStaff -> MFI: Make bulk disbursement 
MFI -> MFICC: Disburse funds \n **POST** bulkTransfers/
note left
{
   "bulkHomeTransactionID": "string", # external identifier
   "options": {
      "onlyValidateParty": "fase", # (boolean) 
      "autoAcceptParty": {
          "enabled": "true" # boolean
      },
      "autoAcceptQuote": {
        "enabled": "true", # (boolean)
        "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
      }
      "skipPartyLookup": "fase", # (boolean)
      "synchronous": "fase", # (boolean)
      "bulkExpiration": DateTime, # expiration date time (string)
    },
   "from": { "partyIdInfo": {} # (partyIdInfo type)
           },                        
   "individualtransfers": [
          {
            "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
            "reference": "string", # Payer Loan reference
            "to": {
              "partyIdInfo": {
                "partyIdType": "MSISDN",
                "partyIdentifier": "string",
                "partySubIdOrType": "string",
                "fspId": "string",
                "extensionList": {"extension": [{"key": "string","value": "string"}]}
              },
            "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
            "currency" : "XXX" # (Enum)
            "amount": "100.0", # money (string)
            "note": "string"
            "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
            "transferRequestExtensions": [{ "key": "string", "value": "string"}]
            }, ...
          ],
   "extensions": [{ "key": "string", "value": "string"}],
}
end note

Loop n times  (in parallel)
    hnote left of MFICC
        For each transfer
        in bulk message
    end hnote
    MFICC -> MFICC: validate MSISDN & Prefix
    alt MSISDN Failed Validation
    MFICC->MFICC:  Add Last Error to Transfer
    end
end Loop
MFICC- ->MFIMC: **POST** /bulkTransfers
note left
**BulkTransferType**
{
   "bulkHomeTransactionID": "string", # external identifier
   "options": {
      "onlyValidateParty": "fase", # (boolean) 
      "autoAcceptParty": {
          "enabled": "true" # boolean
      },
      "autoAcceptQuote": {
        "enabled": "true", # (boolean)
        "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
      }
      "skipPartyLookup": "fase", # (boolean)
      "synchronous": "fase", # (boolean)
      "bulkExpiration": DateTime, # expiration date time (string)
    },
   "from": { "partyIdInfo": {} # (partyIdInfo type)
           },                        
   "individualtransfers": [
          {
            "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
            "reference": "string", # Payer Loan reference
            "to": {
              "partyIdInfo": {
                "partyIdType": "MSISDN",
                "partyIdentifier": "string",
                "partySubIdOrType": "string",
                "fspId": "string",
                "extensionList": {"extension": [{"key": "string","value": "string"}]}
              },
            "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
            "currency" : "XXX" # (Enum)
            "amount": "100.0", # money (string)
            "note": "string"
            "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
            "transferRequestExtensions": [{ "key": "string", "value": "string"}]
            "lastError": {
              "httpStatusCode": 0,
              "mojaloopError": {
                "errorInformation": {
                  "errorCode": "8812",
                  "errorDescription": "string",
                  "extensionList": {"extension": [{"key": "string","value": "string"}]}
                }
              }
            }, ...
          ],
   "extensions": [{ "key": "string", "value": "string"}],
}
end note
alt if (!synchronous)
MFIMC- ->MFICC: Receive HTTP 202 response
MFI <- - MFICC: Receive HTTP 202 response
end

alt if (!skipPartyLookup)
loop N times & within bulkExpiration timelimit  (in parallel)
hnote left of MFIMC
        For each transfer
        in bulk message
end hnote
  alt if (validTransfer)
    MFIMC -> MFIMC: Create TransactionId
    MFIMC -> MJW: **GET** /parties/*\n<i><PartyIdType>**/**</i><i><PartyId>
    activate MFIMC
    MJW -> Oracle: Lookup DFSP for \nrequested Type/ID
    Oracle-> Oracle: Lookup Party for \nrequested Type/ID
    Oracle->MJW: Return DFSP ID
    MJW->MJW: **GET** /parties/{type}/{id}/{subid}\nMake call to payee DFSP to confirm Party information
    MJW->MFIMC: **PUT** /parties/{type}/{id}
    deactivate MFIMC
    
    MFIMC -> MFIMC: Update transaction status and\n attach get parties response
    MFIMC -> MFIMC: Add to next phase FSP bulk call
  else if (!validTransfer)
    MFIMC->MFIMC: Skip
  end
end Loop
else if (skipPartyLookup)
  loop N times & within bulkExpiration timelimit 
    MFIMC->MFIMC: Validate party info \n Add to next phase FSP bulk call
  end loop
end
MFIMC->MFIMC: if(transferStatusValid) Group into M Payee DFSPs

alt if (!autoAcceptParty)
  alt if (synchronous)
    MFIMC- ->MFICC: Response <bulkPartyLookupResponse>
    MFI <- - MFICC: Response <bulkPartyLookupResponse>
    MFI->MStaff: Present Party Response
    MStaff->MFI: Accept Party
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
  else if (!synchronous)
    MFIMC->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    note right
      **bulkPartyLookupResponse**
      {
        "bulkHomeTransactionID": "string", # external identifier
        "options": {
            "onlyValidateParty": "fase", # (boolean) 
            "autoAcceptParty": {
                "enabled": "true" # boolean
            },
            "autoAcceptQuote": {
                "enabled": "true", # (boolean)
                "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
            }
            "skipPartyLookup": "fase", # (boolean)
            "synchronous": "fase", # (boolean)
            "bulkExpiration": DateTime, # expiration date time (string)
        },
        "from": { "partyIdInfo": {} # (partyIdInfo type)
                },                        
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "reference": "string", # Payer Loan reference
                  "to": {
                    "partyIdInfo": {
                      "partyIdType": "MSISDN",
                      "partyIdentifier": "string",
                      "partySubIdOrType": "string",
                      "fspId": "string",
                      "extensionList": {"extension": [{"key": "string","value": "string"}]}
                    },
                  "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
                  "currency" : "XXX" # (Enum)
                  "amount": "100.0", # money (string)
                  "note": "string"
                  "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
                  "transferRequestExtensions": [{ "key": "string", "value": "string"}]
                  "lastError": {
                    "httpStatusCode": 0,
                    "mojaloopError": {
                      "errorInformation": {
                        "errorCode": "8812",1
                        "errorDescription": "string",
                        "extensionList": {"extension": [{"key": "string","value": "string"}]}
                      }
                    }
                  }
                }
        ],
        "extensions": [{ "key": "string", "value": "string"}],
      }
    end note
    MFICC- ->MFIMC: Receive HTTP 202 response
    MFICC->MFI: **PUT** /bulkTransfers/{bulkTransferId}
    MFI- ->MFICC: Receive HTTP 202 response
    MFI->MStaff: Present Party Response
    MStaff->MFI: Accept Party
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
    note left
      **bulkTransferContinuationAcceptParty**
      {
        "bulkHomeTransactionID": "string", # external identifier                    
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "acceptParty": "true" # (boolean)
                }
        ],
      }
    end note    
    MFIMC- ->MFICC: Receive HTTP 202 response
    MFI <- - MFICC: Receive HTTP 202 response
  end
end

loop Quote Processing (M times & within bulkExpiration timelimit in parallel)
hnote left of MFIMC
        For each payee DFSP
        in bulk message
end hnote
    MFIMC->MFIMC: Check bulkExpiration
    MFIMC->MFIMC: Create bulkTransactionId
    MFIMC ->> MFIMC: Calculate bulk expiry \nbased on both expirySeconds config and \nbulkExpiration
    MFIMC ->> MJW: **POST** /bulkquotes
    activate MFIMC
    MJW->PayeeFSPMC: **POST** /bulkquotes 
    PayeeFSPMC->PayeeFSPCC: **GET** /functionSupport?HasSupportForBulkQuotes \n # check to see if the core connector supports bulk quotes
    PayeeFSPCC- ->PayeeFSPMC: Reponse HasSupportForBulkQuotes 
    alt if (HasSupportForBulkQuotes)
      PayeeFSPMC->PayeeFSPCC: **POST** /bulkquotes  
      PayeeFSPCC- ->PayeeFSPMC: Reponse bulkquotes Response
      PayeeFSPMC -> PayeeFSPMC: Update transaction statuses \nand attach quote responses
    else if (!HasSupportForBulkQuotes)
      loop X times for each transfer in bulk message
        PayeeFSPMC->PayeeFSPCC: **POST** /quoterequests  
        PayeeFSPCC- ->PayeeFSPMC: response
        PayeeFSPMC -> PayeeFSPMC: Update transaction status \nand attach quote response
      end Loop
    end
    PayeeFSPMC->MJW: **PUT** /bulkquotes/{id)
    MJW->MFIMC: **PUT** /bulkquotes/{id)
    deactivate  MFIMC
    MFIMC -> MFIMC: Update transaction status \nand attach quote response
end loop

alt if (!autoAcceptQuote)
  alt if (synchronous)
    MFIMC- ->MFICC: Response <bulkQuoteRequestResponse>
    MFI <- - MFICC: Response <bulkQuoteRequestResponse>
    MFI->MStaff: Present Quote Response
    MStaff->MFI: Accept Quote
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
  else if (!synchronous)
    MFIMC->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    note right
      **bulkQuoteRequestResponse**
      {
        "bulkHomeTransactionID": "string", # external identifier
        "options": {
            "onlyValidateParty": "fase", # (boolean) 
            "autoAcceptParty": {
                "enabled": "true" # boolean
            },
            "autoAcceptQuote": {
                "enabled": "true", # (boolean)
                "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
            }
            "skipPartyLookup": "fase", # (boolean)
            "synchronous": "fase", # (boolean)
            "bulkExpiration": DateTime, # expiration date time (string)
        },
        "from": { "partyIdInfo": {} # (partyIdInfo type)
                },                        
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "reference": "string", # Payer Loan reference
                  "to": {
                    "partyIdInfo": {
                      "partyIdType": "MSISDN",
                      "partyIdentifier": "string",
                      "partySubIdOrType": "string",
                      "fspId": "string",
                      "extensionList": {"extension": [{"key": "string","value": "string"}]}
                    },
                  "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
                  "currency" : "XXX" # (Enum)
                  "amount": "100.0", # money (string)
                  "note": "string"
                  "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
                  "transferRequestExtensions": [{ "key": "string", "value": "string"}],
                  "quoteResponse": {
                    "transferAmount": {"currency": "AED","amount": "0.7"},
                    "payeeReceiveAmount": {"currency": "AED","amount": "0.922"},
                    "payeeFspFee": {"currency": "AED","amount": "67247160"},
                    "payeeFspCommission": {"currency": "AED","amount": "829358883"},
                    "expiration": "6286-11-29T16:19:08.300+06:14",
                    "geoCode": {"latitude": "5.9","longitude": "180.0000"},
                    "ilpPacket": "XqOB5HUGEifQ-ebr0TAVAgD3...",
                    "condition": "gZI4iD9u_Yc...",
                    "extensionList": {"extension": [{"key": "string","value": "string"}]}
                  },
                  "lastError": {
                    "httpStatusCode": 0,
                    "mojaloopError": {
                      "errorInformation": {
                        "errorCode": "8812",
                        "errorDescription": "string",
                        "extensionList": {"extension": [{"key": "string","value": "string"}]}
                      }
                    }
                  }
                }
        ],
        "extensions": [{ "key": "string", "value": "string"}],
      }
    end note
    MFICC- ->MFIMC: Receive HTTP 202 response
    MFICC->MFI: **PUT** /bulkTransfers/{bulkTransferId}
    MFI- ->MFICC: Receive HTTP 202 response
    MFI->MStaff: Present Quote Response
    MStaff->MFI: Accept Quote
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
    note left
      **bulkAcceptQuote**
      {
        "bulkHomeTransactionID": "string", # external identifier
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "acceptQuote": "true" #boolean
                }                  
        ],
      }
    end note    

    MFIMC- ->MFICC: Receive HTTP 202 response
    MFI <- - MFICC: Receive HTTP 202 response
  end
end


loop Transfer Processing (M times & within bulkExpiration timelimit  in parallel)
  hnote left of MFIMC
        For each payee DFSP
        in bulk message
  end hnote
    alt if (AutoAcceptQuote)
      MFIMC -> MFIMC: Confirm Fees meets auto accept levels\n and bulkExpiration timelimit not reached \n-> Update Transfer Status
    end
 
    alt if (AcceptedQuote)
    MFIMC ->> MFIMC: Calculate bulk expiry \nbased on both expirySeconds config and \nbulkExpiration
    MFIMC ->> MJW: **POST** /bulktransfers
    activate MFIMC
    MJW-> MJW: Perform liquidity(NDC)check at indivial transfer level
    MJW->MJW: Reserve Funds at indivial transfer level
    MJW ->> PayeeFSPMC: **POST** /bulktransfers
    PayeeFSPMC->PayeeFSPCC: **GET** /functionSupport?HasSupportForBulkTransfers \n # check to see if the core connector supports bulk transfers
    alt if (HasSupportForBulkTransfers)
      PayeeFSPMC->PayeeFSPCC: **POST** /bulktransfers  
      PayeeFSPCC- ->PayeeFSPMC: response
      PayeeFSPMC -> PayeeFSPMC:Update transaction statuses \nand attach transfer responses
    else if (!HasSupportForBulkTransfers)
      loop X times for each transfer in bulk message
        PayeeFSPMC->PayeeFSPCC: **POST** /transfers  
        PayeeFSPCC- ->PayeeFSPMC: response
        PayeeFSPMC -> PayeeFSPMC:Update transaction status \nand attach transfer response
      end Loop
    end
    PayeeFSPMC ->> MJW: **PUT** /bulktransfers/{id} (BulkStatus)
    MJW- ->MJW: Commit funds at indivial transfer level
    alt if (bulkStatus == 'Processing')
    MJW -> PayeeFSPMC: **PATCH** /bulktransfers/{id} (BulkStatus)
    PayeeFSPMC->PayeeFSPCC: **GET** /functionSupport?HasSupportForBulkTransfers \n # check to see if the core connector supports bulk transfers
    alt if (HasSupportForBulkTransfers)
      PayeeFSPMC->PayeeFSPCC: **PATCH** /bulktransfers/{bulkTransferId}  
    else if (!HasSupportForBulkTransfers)
      loop X times for each transfer in bulk message
        PayeeFSPMC->PayeeFSPCC: **PATCH** /transfers/{TransferId}  
      end Loop
    end
    end
    MJW->MFIMC:**PUT** /bulktransfers/{id}
   
    deactivate MFIMC 
    MFIMC -> MFIMC: Update transaction status \nand attach bulk transfers response
    end
end loop
hnote right MFIMC
**bulkTransferResponse**
{
 "homeBulkTransactionID": "string", # external identifier
 "bulkExpiration": DateTime, # expiration date time (string)
 "individualTransferResults": [
    {
      "transferId": "310e5c51-e4fd-30bc-96ae-6dffee2c54cb",
      "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
      "transactionId": "string", # Mojaloop bulk transaction Id used to make the bulk transfer
      "to": {
        "partyIdInfo": {
          "partyIdType": "MSISDN",
          "partyIdentifier": "string",
          "partySubIdOrType": "string",
          "fspId": "string",
          "extensionList": {"extension": [{"key": "string","value": "string"}]}
        }
      },
      "amountType": "SEND",
      "currency": "AED",
      "amount": "0",
      "transactionType": "TRANSFER",
      "note": "string",
      "quoteId": "4932beab-423e-37b6-8587-49c016d2f5ef",
      "quoteResponse": {
        "transferAmount": {"currency": "AED","amount": "0.7"},
        "payeeReceiveAmount": {"currency": "AED","amount": "0.922"},
        "payeeFspFee": {"currency": "AED","amount": "67247160"},
        "payeeFspCommission": {"currency": "AED","amount": "829358883"},
        "expiration": "6286-11-29T16:19:08.300+06:14",
        "geoCode": {"latitude": "5.9","longitude": "180.0000"},
        "ilpPacket": "XqOB5HUGEifQ-ebr0TAVAgD3...",
        "condition": "gZI4iD9u_Yc...",
        "extensionList": {"extension": [{"key": "string","value": "string"}]}
      },
      "fulfil": {
        "fulfilment": "UXgB0280lbHM...",
        "completedTimestamp": "5138-01-31T21:10:42.484Z",
        "transferState": "COMMITTED",
        "extensionList": {"extension": [{"key": "string","value": "string"}]}
      }
      "lastError": {
        "httpStatusCode": 0,
        "mojaloopError": {
          "errorInformation": {
            "errorCode": "8812",
            "errorDescription": "string",
            "extensionList": {"extension": [{"key": "string","value": "string"}]}
        }
  }}}]]
} 
end hnote    
alt if (synchronous)
    MFIMC->MFICC: Response <bulkTransferResponse>
    MFICC->MFI: Response <bulkTransferResponse>
    MFI->MStaff: Transafer response(success & fail)
else if (!synchronous)
    MFIMC->MFICC:Callback Response \n**PUT** /bulkTransfers/{bulkTransferId}\nTransfer Response(success & fail)
    MFICC- ->MFIMC: Receive HTTP 202 response
    MFICC->MFI: **PUT** /bulkTransfers/{bulkTransferId}\nTransfer Status Update (success & fail)
    MFI- ->MFICC: Receive HTTP 202 response
    MFI->MStaff: Transafer response(success & fail)
end
@enduml

@startuml

skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 22
skinparam defaultFontSize 22
skinparam noteFontSize 22
skinparam monochrome true
actor "MFI Staff" as MStaff
participant "MFI CBS" as MFI
box "Payment Manager" #LightGrey
participant "Core\nConnector" as MFICC 
participant "Mojaloop\nConnector" as MFIMC 
end box
participant "Mojaloop\nSwitch" as MJW 
participant "Oracle" as Oracle
box "Payment Manager" #LightGrey
participant "Payee\nMojaloop\nConnector" as PayeeFSPMC 
participant "Payee\nCore\nConnector" as PayeeFSPCC 
end box

== Bulk Transfers implemented using Mojaloop bulk transfers ==

autonumber 1 1 "<b>[0]"
MStaff -> MFI: Make bulk disbursement 
MFI -> MFICC: Disburse funds \n **POST** bulkTransfers/
note left
{
   "bulkHomeTransactionID": "string", # external identifier
   "options": {
      "onlyValidateParty": "fase", # (boolean) 
      "autoAcceptParty": {
          "enabled": "true" # boolean
      },
      "autoAcceptQuote": {
        "enabled": "true", # (boolean)
        "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
      }
      "skipPartyLookup": "fase", # (boolean)
      "synchronous": "fase", # (boolean)
      "bulkExpiration": DateTime, # expiration date time (string)
    },
   "from": { "partyIdInfo": {} # (partyIdInfo type)
           },                        
   "individualtransfers": [
          {
            "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
            "reference": "string", # Payer Loan reference
            "to": {
              "partyIdInfo": {
                "partyIdType": "MSISDN",
                "partyIdentifier": "string",
                "partySubIdOrType": "string",
                "fspId": "string",
                "extensionList": {"extension": [{"key": "string","value": "string"}]}
              },
            "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
            "currency" : "XXX" # (Enum)
            "amount": "100.0", # money (string)
            "note": "string"
            "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
            "transferRequestExtensions": [{ "key": "string", "value": "string"}]
            }, ...
          ],
   "extensions": [{ "key": "string", "value": "string"}],
}
end note

Loop n times  (in parallel)
    hnote left of MFICC
        For each transfer
        in bulk message
    end hnote
    MFICC -> MFICC: validate MSISDN & Prefix
    alt MSISDN Failed Validation
    MFICC->MFICC:  Add Last Error to Transfer
    end
end Loop
MFICC- ->MFIMC: **POST** /bulkTransfers
note left
**BulkTransferType**
{
   "bulkHomeTransactionID": "string", # external identifier
   "options": {
      "onlyValidateParty": "fase", # (boolean) 
      "autoAcceptParty": {
          "enabled": "true" # boolean
      },
      "autoAcceptQuote": {
        "enabled": "true", # (boolean)
        "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
      }
      "skipPartyLookup": "fase", # (boolean)
      "synchronous": "fase", # (boolean)
      "bulkExpiration": DateTime, # expiration date time (string)
    },
   "from": { "partyIdInfo": {} # (partyIdInfo type)
           },                        
   "individualtransfers": [
          {
            "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
            "reference": "string", # Payer Loan reference
            "to": {
              "partyIdInfo": {
                "partyIdType": "MSISDN",
                "partyIdentifier": "string",
                "partySubIdOrType": "string",
                "fspId": "string",
                "extensionList": {"extension": [{"key": "string","value": "string"}]}
              },
            "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
            "currency" : "XXX" # (Enum)
            "amount": "100.0", # money (string)
            "note": "string"
            "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
            "transferRequestExtensions": [{ "key": "string", "value": "string"}]
            "lastError": {
              "httpStatusCode": 0,
              "mojaloopError": {
                "errorInformation": {
                  "errorCode": "8812",
                  "errorDescription": "string",
                  "extensionList": {"extension": [{"key": "string","value": "string"}]}
                }
              }
            }, ...
          ],
   "extensions": [{ "key": "string", "value": "string"}],
}
end note
alt if (!synchronous)
MFIMC- ->MFICC: Receive HTTP 202 response
MFI <- - MFICC: Receive HTTP 202 response
end

alt if (!skipPartyLookup)
loop N times & within bulkExpiration timelimit  (in parallel)
hnote left of MFIMC
        For each transfer
        in bulk message
end hnote
  alt if (validTransfer)
    MFIMC -> MFIMC: Create TransactionId
    MFIMC -> MJW: **GET** /parties/*\n<i><PartyIdType>**/**</i><i><PartyId>
    activate MFIMC
    MJW -> Oracle: Lookup DFSP for \nrequested Type/ID
    Oracle-> Oracle: Lookup Party for \nrequested Type/ID
    Oracle->MJW: Return DFSP ID
    MJW->MJW: **GET** /parties/{type}/{id}/{subid}\nMake call to payee DFSP to confirm Party information
    MJW->MFIMC: **PUT** /parties/{type}/{id}
    deactivate MFIMC
    
    MFIMC -> MFIMC: Update transaction status and\n attach get parties response
    MFIMC -> MFIMC: Add to next phase FSP bulk call
  else if (!validTransfer)
    MFIMC->MFIMC: Skip
  end
end Loop
else if (skipPartyLookup)
  loop N times & within bulkExpiration timelimit 
    MFIMC->MFIMC: Validate party info \n Add to next phase FSP bulk call
  end loop
end
MFIMC->MFIMC: if(transferStatusValid) Group into M Payee DFSPs

alt if (!autoAcceptParty)
  alt if (synchronous)
    MFIMC- ->MFICC: Response <bulkPartyLookupResponse>
    MFI <- - MFICC: Response <bulkPartyLookupResponse>
    MFI->MStaff: Present Party Response
    MStaff->MFI: Accept Party
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
  else if (!synchronous)
    MFIMC->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    note right
      **bulkPartyLookupResponse**
      {
        "bulkHomeTransactionID": "string", # external identifier
        "options": {
            "onlyValidateParty": "fase", # (boolean) 
            "autoAcceptParty": {
                "enabled": "true" # boolean
            },
            "autoAcceptQuote": {
                "enabled": "true", # (boolean)
                "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
            }
            "skipPartyLookup": "fase", # (boolean)
            "synchronous": "fase", # (boolean)
            "bulkExpiration": DateTime, # expiration date time (string)
        },
        "from": { "partyIdInfo": {} # (partyIdInfo type)
                },                        
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "reference": "string", # Payer Loan reference
                  "to": {
                    "partyIdInfo": {
                      "partyIdType": "MSISDN",
                      "partyIdentifier": "string",
                      "partySubIdOrType": "string",
                      "fspId": "string",
                      "extensionList": {"extension": [{"key": "string","value": "string"}]}
                    },
                  "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
                  "currency" : "XXX" # (Enum)
                  "amount": "100.0", # money (string)
                  "note": "string"
                  "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
                  "transferRequestExtensions": [{ "key": "string", "value": "string"}]
                  "lastError": {
                    "httpStatusCode": 0,
                    "mojaloopError": {
                      "errorInformation": {
                        "errorCode": "8812",1
                        "errorDescription": "string",
                        "extensionList": {"extension": [{"key": "string","value": "string"}]}
                      }
                    }
                  }
                }
        ],
        "extensions": [{ "key": "string", "value": "string"}],
      }
    end note
    MFICC- ->MFIMC: Receive HTTP 202 response
    MFICC->MFI: **PUT** /bulkTransfers/{bulkTransferId}
    MFI- ->MFICC: Receive HTTP 202 response
    MFI->MStaff: Present Party Response
    MStaff->MFI: Accept Party
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
    note left
      **bulkTransferContinuationAcceptParty**
      {
        "bulkHomeTransactionID": "string", # external identifier                    
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "acceptParty": "true" # (boolean)
                }
        ],
      }
    end note    
    MFIMC- ->MFICC: Receive HTTP 202 response
    MFI <- - MFICC: Receive HTTP 202 response
  end
end

loop Quote Processing (M times & within bulkExpiration timelimit in parallel)
hnote left of MFIMC
        For each payee DFSP
        in bulk message
end hnote
    MFIMC->MFIMC: Check bulkExpiration
    MFIMC->MFIMC: Create bulkTransactionId
    MFIMC ->> MFIMC: Calculate bulk expiry \nbased on both expirySeconds config and \nbulkExpiration
    MFIMC ->> MJW: **POST** /bulkquotes
    activate MFIMC
    MJW->PayeeFSPMC: **POST** /bulkquotes 
    PayeeFSPMC->PayeeFSPCC: **GET** /functionSupport?HasSupportForBulkQuotes \n # check to see if the core connector supports bulk quotes
    PayeeFSPCC- ->PayeeFSPMC: Reponse HasSupportForBulkQuotes 
    alt if (HasSupportForBulkQuotes)
      PayeeFSPMC->PayeeFSPCC: **POST** /bulkquotes  
      PayeeFSPCC- ->PayeeFSPMC: Reponse bulkquotes Response
      PayeeFSPMC -> PayeeFSPMC: Update transaction statuses \nand attach quote responses
    else if (!HasSupportForBulkQuotes)
      loop X times for each transfer in bulk message
        PayeeFSPMC->PayeeFSPCC: **POST** /quoterequests  
        PayeeFSPCC- ->PayeeFSPMC: response
        PayeeFSPMC -> PayeeFSPMC: Update transaction status \nand attach quote response
      end Loop
    end
    PayeeFSPMC->MJW: **PUT** /bulkquotes/{id)
    MJW->MFIMC: **PUT** /bulkquotes/{id)
    deactivate  MFIMC
    MFIMC -> MFIMC: Update transaction status \nand attach quote response
end loop

alt if (!autoAcceptQuote)
  alt if (synchronous)
    MFIMC- ->MFICC: Response <bulkQuoteRequestResponse>
    MFI <- - MFICC: Response <bulkQuoteRequestResponse>
    MFI->MStaff: Present Quote Response
    MStaff->MFI: Accept Quote
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
  else if (!synchronous)
    MFIMC->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    note right
      **bulkQuoteRequestResponse**
      {
        "bulkHomeTransactionID": "string", # external identifier
        "options": {
            "onlyValidateParty": "fase", # (boolean) 
            "autoAcceptParty": {
                "enabled": "true" # boolean
            },
            "autoAcceptQuote": {
                "enabled": "true", # (boolean)
                "transferFeeLimit": { "currency": "AED", "amount": "88054601147.69" }, # mandatory if enabled is true
            }
            "skipPartyLookup": "fase", # (boolean)
            "synchronous": "fase", # (boolean)
            "bulkExpiration": DateTime, # expiration date time (string)
        },
        "from": { "partyIdInfo": {} # (partyIdInfo type)
                },                        
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "reference": "string", # Payer Loan reference
                  "to": {
                    "partyIdInfo": {
                      "partyIdType": "MSISDN",
                      "partyIdentifier": "string",
                      "partySubIdOrType": "string",
                      "fspId": "string",
                      "extensionList": {"extension": [{"key": "string","value": "string"}]}
                    },
                  "amountType": "RECEIVE" # SEND, RECEIVE (Enum)
                  "currency" : "XXX" # (Enum)
                  "amount": "100.0", # money (string)
                  "note": "string"
                  "quoteRequestExtensions": [{ "key": "string", "value": "string"}],
                  "transferRequestExtensions": [{ "key": "string", "value": "string"}],
                  "quoteResponse": {
                    "transferAmount": {"currency": "AED","amount": "0.7"},
                    "payeeReceiveAmount": {"currency": "AED","amount": "0.922"},
                    "payeeFspFee": {"currency": "AED","amount": "67247160"},
                    "payeeFspCommission": {"currency": "AED","amount": "829358883"},
                    "expiration": "6286-11-29T16:19:08.300+06:14",
                    "geoCode": {"latitude": "5.9","longitude": "180.0000"},
                    "ilpPacket": "XqOB5HUGEifQ-ebr0TAVAgD3...",
                    "condition": "gZI4iD9u_Yc...",
                    "extensionList": {"extension": [{"key": "string","value": "string"}]}
                  },
                  "lastError": {
                    "httpStatusCode": 0,
                    "mojaloopError": {
                      "errorInformation": {
                        "errorCode": "8812",
                        "errorDescription": "string",
                        "extensionList": {"extension": [{"key": "string","value": "string"}]}
                      }
                    }
                  }
                }
        ],
        "extensions": [{ "key": "string", "value": "string"}],
      }
    end note
    MFICC- ->MFIMC: Receive HTTP 202 response
    MFICC->MFI: **PUT** /bulkTransfers/{bulkTransferId}
    MFI- ->MFICC: Receive HTTP 202 response
    MFI->MStaff: Present Quote Response
    MStaff->MFI: Accept Quote
    MFI->MFICC: **PUT** /bulkTransfers/{bulkTransferId}
    MFICC->MFIMC: **PUT** /bulkTransfers/{bulkTransferId}
    note left
      **bulkAcceptQuote**
      {
        "bulkHomeTransactionID": "string", # external identifier
        "individualtransfers": [
                {
                  "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
                  "transactionId": "UUID", # Created by ML connector
                  "acceptQuote": "true" #boolean
                }                  
        ],
      }
    end note    

    MFIMC- ->MFICC: Receive HTTP 202 response
    MFI <- - MFICC: Receive HTTP 202 response
  end
end


loop Transfer Processing (M times & within bulkExpiration timelimit  in parallel)
  hnote left of MFIMC
        For each payee DFSP
        in bulk message
  end hnote
    alt if (AutoAcceptQuote)
      MFIMC -> MFIMC: Confirm Fees meets auto accept levels\n and bulkExpiration timelimit not reached \n-> Update Transfer Status
    end
 
    alt if (AcceptedQuote)
    MFIMC ->> MFIMC: Calculate bulk expiry \nbased on both expirySeconds config and \nbulkExpiration
    MFIMC ->> MJW: **POST** /bulktransfers
    activate MFIMC
    MJW-> MJW: Perform liquidity(NDC)check at indivial transfer level
    MJW->MJW: Reserve Funds at indivial transfer level
    MJW ->> PayeeFSPMC: **POST** /bulktransfers
    PayeeFSPMC->PayeeFSPCC: **GET** /functionSupport?HasSupportForBulkTransfers \n # check to see if the core connector supports bulk transfers
    alt if (HasSupportForBulkTransfers)
      PayeeFSPMC->PayeeFSPCC: **POST** /bulktransfers  
      PayeeFSPCC- ->PayeeFSPMC: response
      PayeeFSPMC -> PayeeFSPMC:Update transaction statuses \nand attach transfer responses
    else if (!HasSupportForBulkTransfers)
      loop X times for each transfer in bulk message
        PayeeFSPMC->PayeeFSPCC: **POST** /transfers  
        PayeeFSPCC- ->PayeeFSPMC: response
        PayeeFSPMC -> PayeeFSPMC:Update transaction status \nand attach transfer response
      end Loop
    end
    PayeeFSPMC ->> MJW: **PUT** /bulktransfers/{id} (BulkStatus)
    MJW- ->MJW: Commit funds at indivial transfer level
    alt if (bulkStatus == 'Processing')
    MJW -> PayeeFSPMC: **PATCH** /bulktransfers/{id} (BulkStatus)
    PayeeFSPMC->PayeeFSPCC: **GET** /functionSupport?HasSupportForBulkTransfers \n # check to see if the core connector supports bulk transfers
    alt if (HasSupportForBulkTransfers)
      PayeeFSPMC->PayeeFSPCC: **PATCH** /bulktransfers/{bulkTransferId}  
    else if (!HasSupportForBulkTransfers)
      loop X times for each transfer in bulk message
        PayeeFSPMC->PayeeFSPCC: **PATCH** /transfers/{TransferId}  
      end Loop
    end
    end
    MJW->MFIMC:**PUT** /bulktransfers/{id}
   
    deactivate MFIMC 
    MFIMC -> MFIMC: Update transaction status \nand attach bulk transfers response
    end
end loop
hnote right MFIMC
**bulkTransferResponse**
{
 "homeBulkTransactionID": "string", # external identifier
 "bulkExpiration": DateTime, # expiration date time (string)
 "individualTransferResults": [
    {
      "transferId": "310e5c51-e4fd-30bc-96ae-6dffee2c54cb",
      "homeTransactionId": "string", # Payer DFSP CBS Transaction identifier
      "transactionId": "string", # Mojaloop bulk transaction Id used to make the bulk transfer
      "to": {
        "partyIdInfo": {
          "partyIdType": "MSISDN",
          "partyIdentifier": "string",
          "partySubIdOrType": "string",
          "fspId": "string",
          "extensionList": {"extension": [{"key": "string","value": "string"}]}
        }
      },
      "amountType": "SEND",
      "currency": "AED",
      "amount": "0",
      "transactionType": "TRANSFER",
      "note": "string",
      "quoteId": "4932beab-423e-37b6-8587-49c016d2f5ef",
      "quoteResponse": {
        "transferAmount": {"currency": "AED","amount": "0.7"},
        "payeeReceiveAmount": {"currency": "AED","amount": "0.922"},
        "payeeFspFee": {"currency": "AED","amount": "67247160"},
        "payeeFspCommission": {"currency": "AED","amount": "829358883"},
        "expiration": "6286-11-29T16:19:08.300+06:14",
        "geoCode": {"latitude": "5.9","longitude": "180.0000"},
        "ilpPacket": "XqOB5HUGEifQ-ebr0TAVAgD3...",
        "condition": "gZI4iD9u_Yc...",
        "extensionList": {"extension": [{"key": "string","value": "string"}]}
      },
      "fulfil": {
        "fulfilment": "UXgB0280lbHM...",
        "completedTimestamp": "5138-01-31T21:10:42.484Z",
        "transferState": "COMMITTED",
        "extensionList": {"extension": [{"key": "string","value": "string"}]}
      }
      "lastError": {
        "httpStatusCode": 0,
        "mojaloopError": {
          "errorInformation": {
            "errorCode": "8812",
            "errorDescription": "string",
            "extensionList": {"extension": [{"key": "string","value": "string"}]}
        }
  }}}]]
} 
end hnote    
alt if (synchronous)
    MFIMC->MFICC: Response <bulkTransferResponse>
    MFICC->MFI: Response <bulkTransferResponse>
    MFI->MStaff: Transafer response(success & fail)
else if (!synchronous)
    MFIMC->MFICC:Callback Response \n**PUT** /bulkTransfers/{bulkTransferId}\nTransfer Response(success & fail)
    MFICC- ->MFIMC: Receive HTTP 202 response
    MFICC->MFI: **PUT** /bulkTransfers/{bulkTransferId}\nTransfer Status Update (success & fail)
    MFI- ->MFICC: Receive HTTP 202 response
    MFI->MStaff: Transafer response(success & fail)
end
@enduml

PlantUML version 1.2020.13(Sat Jun 13 13:26:38 BST 2020)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>