<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3453px" preserveAspectRatio="none" style="width:1995px;height:3453px;" version="1.1" viewBox="0 0 1995 3453" width="1995px" zoomAndPan="magnify"><defs><filter height="300%" id="fdk1zikdf8vg2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="3438.75" style="stroke: #383838; stroke-width: 1.0;" width="350" x="820.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182" x="904.5" y="26.8379">Payment Manager</text><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="1098.7969" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1102.5" y="333.375"/><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="640.0781" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1102.5" y="1835.8906"/><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="400.0469" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1102.5" y="2710.3281"/><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="181.3594" style="stroke: #000000; stroke-width: 2.0;" width="455" x="13" y="1488.8438"/><rect fill="#FFFFFF" height="84.3438" style="stroke: none; stroke-width: 1.0;" width="455" x="13" y="1585.8594"/><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="181.3594" style="stroke: #000000; stroke-width: 2.0;" width="455" x="13" y="3167.0469"/><rect fill="#FFFFFF" height="84.3438" style="stroke: none; stroke-width: 1.0;" width="455" x="13" y="3264.0625"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="135" x2="135" y1="110.0156" y2="3365.4063"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="883.5" x2="883.5" y1="110.0156" y2="3365.4063"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1107.5" x2="1107.5" y1="110.0156" y2="3365.4063"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1489.5" x2="1489.5" y1="110.0156" y2="3365.4063"/><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="221" x="23" y="63.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="207" x="30" y="93.1816">Core banking solution</text><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="221" x="23" y="3364.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="207" x="30" y="3394.2441">Core banking solution</text><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="824.5" y="35.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="857.5" y="65.5098">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="831.5" y="93.1816">Connector</text><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="824.5" y="3364.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="857.5" y="3394.2441">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="831.5" y="3421.916">Connector</text><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1048.5" y="35.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1060.5" y="65.5098">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1055.5" y="93.1816">Connector</text><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1048.5" y="3364.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1060.5" y="3394.2441">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1055.5" y="3421.916">Connector</text><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="104" x="1435.5" y="35.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1442.5" y="65.5098">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="1456" y="93.1816">Switch</text><rect fill="#F8F8F8" filter="url(#fdk1zikdf8vg2)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="104" x="1435.5" y="3364.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1442.5" y="3394.2441">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="1456" y="3421.916">Switch</text><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="1098.7969" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1102.5" y="333.375"/><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="640.0781" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1102.5" y="1835.8906"/><rect fill="#FFFFFF" filter="url(#fdk1zikdf8vg2)" height="400.0469" style="stroke: #383838; stroke-width: 1.0;" width="10" x="1102.5" y="2710.3281"/><rect fill="#EEEEEE" filter="url(#fdk1zikdf8vg2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1980.5" x="3" y="146.8516"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1983.5" y1="146.8516" y2="146.8516"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1983.5" y1="149.8516" y2="149.8516"/><rect fill="#EEEEEE" filter="url(#fdk1zikdf8vg2)" height="35.6719" style="stroke: #000000; stroke-width: 2.0;" width="584" x="701.25" y="130.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="564" x="707.25" y="156.8535">Payer DFSP integration - 2 phase commit - single phase</text><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="177.5" y1="209.3594" y2="209.3594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="177.5" x2="177.5" y1="209.3594" y2="222.3594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="136.5" x2="177.5" y1="222.3594" y2="222.3594"/><polygon fill="#383838" points="146.5,218.3594,136.5,222.3594,146.5,226.3594,142.5,222.3594" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="142.5" y="202.5254">[1]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="139" x="172.5" y="202.5254">Reserve funds</text><polygon fill="#383838" points="871.5,287.7031,881.5,291.7031,871.5,295.7031,875.5,291.7031" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="877.5" y1="291.7031" y2="291.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="142.5" y="271.0332">[2]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="172.5" y="257.1973">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="118" x="240.5" y="257.1973">/sendMoney</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="670" x="172.5" y="284.8691">(AUTO_ACCEPT_PARTY = true, AUTO_ACCEPT_QUOTES = true)</text><polygon fill="#383838" points="1090.5,329.375,1100.5,333.375,1090.5,337.375,1094.5,333.375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="883.5" x2="1096.5" y1="333.375" y2="333.375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="890.5" y="326.541">[3]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="920.5" y="326.541">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="988.5" y="326.541">/transfers</text><polygon fill="#383838" points="1477.5,371.0469,1487.5,375.0469,1477.5,379.0469,1481.5,375.0469" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1112.5" x2="1483.5" y1="375.0469" y2="375.0469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1119.5" y="368.2129">[4]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1149.5" y="368.2129">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="258" x="1202.5" y="368.2129">/parties/{Type}/{ID}/{SubId}</text><polygon fill="#383838" points="1123.5,412.7188,1113.5,416.7188,1123.5,420.7188,1119.5,416.7188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1117.5" x2="1488.5" y1="416.7188" y2="416.7188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1129.5" y="409.8848">[5]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="196" x="1159.5" y="409.8848">HTTP 202 response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="458.3906" y2="458.3906"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="458.3906" y2="471.3906"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="471.3906" y2="471.3906"/><polygon fill="#383838" points="1500.5,467.3906,1490.5,471.3906,1500.5,475.3906,1496.5,471.3906" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1496.5" y="451.5566">[6]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="353" x="1526.5" y="451.5566">Determine Payee DFSP using oracle</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="540.7344" y2="540.7344"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="540.7344" y2="553.7344"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="553.7344" y2="553.7344"/><polygon fill="#383838" points="1500.5,549.7344,1490.5,553.7344,1500.5,557.7344,1496.5,553.7344" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1496.5" y="520.0645">[7]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="438" x="1526.5" y="506.2285">Lookup Payee Information from Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="50" x="1532.5" y="533.9004">using</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1588.5" y="533.9004">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="71" x="1641.5" y="533.9004">/parties</text><polygon fill="#383838" points="1123.5,591.4063,1113.5,595.4063,1123.5,599.4063,1119.5,595.4063" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1117.5" x2="1488.5" y1="595.4063" y2="595.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1129.5" y="588.5723">[8]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1159.5" y="588.5723">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="258" x="1211.5" y="588.5723">/parties/{Type}/{ID}/{SubId}</text><polygon fill="#383838" points="1477.5,633.0781,1487.5,637.0781,1477.5,641.0781,1481.5,637.0781" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1112.5" x2="1483.5" y1="637.0781" y2="637.0781"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1119.5" y="630.2441">[9]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="1149.5" y="630.2441">HTTP 200 Response</text><rect fill="#ECECEC" filter="url(#fdk1zikdf8vg2)" height="35" style="stroke: #383838; stroke-width: 1.0;" width="132" x="965" y="650.0781"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="124" x="969" y="676.916">Accept Party</text><polygon fill="#383838" points="1477.5,720.4219,1487.5,724.4219,1477.5,728.4219,1481.5,724.4219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1112.5" x2="1483.5" y1="724.4219" y2="724.4219"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="717.5879">[10]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1161.5" y="717.5879">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="71" x="1229.5" y="717.5879">/quotes</text><polygon fill="#383838" points="1123.5,762.0938,1113.5,766.0938,1123.5,770.0938,1119.5,766.0938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1117.5" x2="1488.5" y1="766.0938" y2="766.0938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="759.2598">[11]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="196" x="1171.5" y="759.2598">HTTP 202 response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="835.4375" y2="835.4375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="835.4375" y2="848.4375"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="848.4375" y2="848.4375"/><polygon fill="#383838" points="1500.5,844.4375,1490.5,848.4375,1500.5,852.4375,1496.5,848.4375" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="814.7676">[12]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="297" x="1538.5" y="800.9316">Pass on quote to Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="50" x="1544.5" y="828.6035">using</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1600.5" y="828.6035">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="71" x="1668.5" y="828.6035">/quotes</text><polygon fill="#383838" points="1123.5,886.1094,1113.5,890.1094,1123.5,894.1094,1119.5,890.1094" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1117.5" x2="1488.5" y1="890.1094" y2="890.1094"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="883.2754">[13]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1171.5" y="883.2754">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="109" x="1223.5" y="883.2754">/quotes/{Id}</text><polygon fill="#383838" points="1477.5,927.7813,1487.5,931.7813,1477.5,935.7813,1481.5,931.7813" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1112.5" x2="1483.5" y1="931.7813" y2="931.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="924.9473">[14]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="1161.5" y="924.9473">HTTP 200 Response</text><rect fill="#ECECEC" filter="url(#fdk1zikdf8vg2)" height="35" style="stroke: #383838; stroke-width: 1.0;" width="140" x="957" y="944.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="132" x="961" y="971.6191">Accept Quote</text><polygon fill="#383838" points="1477.5,1015.125,1487.5,1019.125,1477.5,1023.125,1481.5,1019.125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1112.5" x2="1483.5" y1="1019.125" y2="1019.125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="1012.291">[15]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1161.5" y="1012.291">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1229.5" y="1012.291">/transfers</text><polygon fill="#383838" points="1123.5,1056.7969,1113.5,1060.7969,1123.5,1064.7969,1119.5,1060.7969" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1117.5" x2="1488.5" y1="1060.7969" y2="1060.7969"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="1053.9629">[16]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="196" x="1171.5" y="1053.9629">HTTP 202 response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="1102.4688" y2="1102.4688"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="1102.4688" y2="1115.4688"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="1115.4688" y2="1115.4688"/><polygon fill="#383838" points="1500.5,1111.4688,1490.5,1115.4688,1500.5,1119.4688,1496.5,1115.4688" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="1095.6348">[17]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="267" x="1538.5" y="1095.6348">Reserve Payer DFSP funds</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="1184.8125" y2="1184.8125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="1184.8125" y2="1197.8125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="1197.8125" y2="1197.8125"/><polygon fill="#383838" points="1500.5,1193.8125,1490.5,1197.8125,1500.5,1201.8125,1496.5,1197.8125" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="1164.1426">[18]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="316" x="1538.5" y="1150.3066">Pass on transfer to Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="50" x="1544.5" y="1177.9785">using</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1600.5" y="1177.9785">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1668.5" y="1177.9785">/transfers</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="1239.4844" y2="1239.4844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="1239.4844" y2="1252.4844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="1252.4844" y2="1252.4844"/><polygon fill="#383838" points="1500.5,1248.4844,1490.5,1252.4844,1500.5,1256.4844,1496.5,1252.4844" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="1232.6504">[19]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="136" x="1538.5" y="1232.6504">Calculate fees</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="1294.1563" y2="1294.1563"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="1294.1563" y2="1307.1563"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="1307.1563" y2="1307.1563"/><polygon fill="#383838" points="1500.5,1303.1563,1490.5,1307.1563,1500.5,1311.1563,1496.5,1307.1563" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="1287.3223">[20]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="262" x="1538.5" y="1287.3223">Commit Payer DFSP funds</text><polygon fill="#383838" points="1123.5,1344.8281,1113.5,1348.8281,1123.5,1352.8281,1119.5,1348.8281" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1117.5" x2="1488.5" y1="1348.8281" y2="1348.8281"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="1341.9941">[21]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1171.5" y="1341.9941">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="128" x="1223.5" y="1341.9941">/transfers/{Id}</text><polygon fill="#383838" points="1477.5,1386.5,1487.5,1390.5,1477.5,1394.5,1481.5,1390.5" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1112.5" x2="1483.5" y1="1390.5" y2="1390.5"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="1383.666">[22]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="1161.5" y="1383.666">HTTP 200 Response</text><polygon fill="#383838" points="894.5,1428.1719,884.5,1432.1719,894.5,1436.1719,890.5,1432.1719" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="888.5" x2="1106.5" y1="1432.1719" y2="1432.1719"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="900.5" y="1425.3379">[23]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="942.5" y="1425.3379">response</text><polygon fill="#383838" points="146.5,1469.8438,136.5,1473.8438,146.5,1477.8438,142.5,1473.8438" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="140.5" x2="882.5" y1="1473.8438" y2="1473.8438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="152.5" y="1467.0098">[24]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="194.5" y="1467.0098">response</text><path d="M13,1488.8438 L82,1488.8438 L82,1507.8438 L72,1517.8438 L13,1517.8438 L13,1488.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="181.3594" style="stroke: #000000; stroke-width: 2.0;" width="455" x="13" y="1488.8438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="28" y="1512.6816">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="366" x="97" y="1513.6816">[if (transferStatus== 'COMMITTED')]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="177.5" y1="1564.8594" y2="1564.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="177.5" x2="177.5" y1="1564.8594" y2="1577.8594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="136.5" x2="177.5" y1="1577.8594" y2="1577.8594"/><polygon fill="#383838" points="146.5,1573.8594,136.5,1577.8594,146.5,1581.8594,142.5,1577.8594" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="1558.0254">[25]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="152" x="184.5" y="1558.0254">Finalise transfer</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="468" y1="1586.8594" y2="1586.8594"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="18" y="1609.6973">[else]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="177.5" y1="1649.2031" y2="1649.2031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="177.5" x2="177.5" y1="1649.2031" y2="1662.2031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="136.5" x2="177.5" y1="1662.2031" y2="1662.2031"/><polygon fill="#383838" points="146.5,1658.2031,136.5,1662.2031,146.5,1666.2031,142.5,1662.2031" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="1642.3691">[26]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="161" x="184.5" y="1642.3691">Rollback transfer</text><rect fill="#EEEEEE" filter="url(#fdk1zikdf8vg2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1980.5" x="3" y="1704.0391"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1983.5" y1="1704.0391" y2="1704.0391"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1983.5" y1="1707.0391" y2="1707.0391"/><rect fill="#EEEEEE" filter="url(#fdk1zikdf8vg2)" height="35.6719" style="stroke: #000000; stroke-width: 2.0;" width="684" x="651.25" y="1687.2031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="664" x="657.25" y="1714.041">Payer DFSP integration - 2 phase commit - with user confirmation</text><polygon fill="#383838" points="871.5,1790.2188,881.5,1794.2188,871.5,1798.2188,875.5,1794.2188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="877.5" y1="1794.2188" y2="1794.2188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="1773.5488">[27]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="184.5" y="1759.7129">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="118" x="252.5" y="1759.7129">/sendMoney</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="621" x="184.5" y="1787.3848">(AUTO_ACCEPT_PARTY = true, AUTO_ACCEPT_QUOTES =</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="811.5" y="1787.3848">false</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="7" x="859.5" y="1787.3848">)</text><polygon fill="#383838" points="1090.5,1831.8906,1100.5,1835.8906,1090.5,1839.8906,1094.5,1835.8906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="883.5" x2="1096.5" y1="1835.8906" y2="1835.8906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="890.5" y="1829.0566">[28]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="932.5" y="1829.0566">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1000.5" y="1829.0566">/transfers</text><polygon fill="#383838" points="1477.5,1873.5625,1487.5,1877.5625,1477.5,1881.5625,1481.5,1877.5625" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1112.5" x2="1483.5" y1="1877.5625" y2="1877.5625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="1870.7285">[29]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1161.5" y="1870.7285">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="258" x="1214.5" y="1870.7285">/parties/{Type}/{ID}/{SubId}</text><polygon fill="#383838" points="1123.5,1915.2344,1113.5,1919.2344,1123.5,1923.2344,1119.5,1919.2344" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1117.5" x2="1488.5" y1="1919.2344" y2="1919.2344"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="1912.4004">[30]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="196" x="1171.5" y="1912.4004">HTTP 202 response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="1960.9063" y2="1960.9063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="1960.9063" y2="1973.9063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="1973.9063" y2="1973.9063"/><polygon fill="#383838" points="1500.5,1969.9063,1490.5,1973.9063,1500.5,1977.9063,1496.5,1973.9063" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="1954.0723">[31]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="353" x="1538.5" y="1954.0723">Determine Payee DFSP using oracle</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="2043.25" y2="2043.25"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="2043.25" y2="2056.25"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="2056.25" y2="2056.25"/><polygon fill="#383838" points="1500.5,2052.25,1490.5,2056.25,1500.5,2060.25,1496.5,2056.25" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="2022.5801">[32]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="438" x="1538.5" y="2008.7441">Lookup Payee Information from Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="50" x="1544.5" y="2036.416">using</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1600.5" y="2036.416">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="71" x="1653.5" y="2036.416">/parties</text><polygon fill="#383838" points="1123.5,2093.9219,1113.5,2097.9219,1123.5,2101.9219,1119.5,2097.9219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1117.5" x2="1488.5" y1="2097.9219" y2="2097.9219"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="2091.0879">[33]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1171.5" y="2091.0879">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="258" x="1223.5" y="2091.0879">/parties/{Type}/{ID}/{SubId}</text><polygon fill="#383838" points="1477.5,2135.5938,1487.5,2139.5938,1477.5,2143.5938,1481.5,2139.5938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1112.5" x2="1483.5" y1="2139.5938" y2="2139.5938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="2132.7598">[34]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="1161.5" y="2132.7598">HTTP 200 Response</text><rect fill="#ECECEC" filter="url(#fdk1zikdf8vg2)" height="35" style="stroke: #383838; stroke-width: 1.0;" width="132" x="965" y="2152.5938"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="124" x="969" y="2179.4316">Accept Party</text><polygon fill="#383838" points="1477.5,2222.9375,1487.5,2226.9375,1477.5,2230.9375,1481.5,2226.9375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1112.5" x2="1483.5" y1="2226.9375" y2="2226.9375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="2220.1035">[35]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1161.5" y="2220.1035">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="71" x="1229.5" y="2220.1035">/quotes</text><polygon fill="#383838" points="1123.5,2264.6094,1113.5,2268.6094,1123.5,2272.6094,1119.5,2268.6094" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1117.5" x2="1488.5" y1="2268.6094" y2="2268.6094"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="2261.7754">[36]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="196" x="1171.5" y="2261.7754">HTTP 202 response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="2337.9531" y2="2337.9531"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="2337.9531" y2="2350.9531"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="2350.9531" y2="2350.9531"/><polygon fill="#383838" points="1500.5,2346.9531,1490.5,2350.9531,1500.5,2354.9531,1496.5,2350.9531" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="2317.2832">[37]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="297" x="1538.5" y="2303.4473">Pass on quote to Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="50" x="1544.5" y="2331.1191">using</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1600.5" y="2331.1191">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="71" x="1668.5" y="2331.1191">/quotes</text><polygon fill="#383838" points="1123.5,2388.625,1113.5,2392.625,1123.5,2396.625,1119.5,2392.625" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1117.5" x2="1488.5" y1="2392.625" y2="2392.625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="2385.791">[38]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1171.5" y="2385.791">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="109" x="1223.5" y="2385.791">/quotes/{Id}</text><polygon fill="#383838" points="1477.5,2430.2969,1487.5,2434.2969,1477.5,2438.2969,1481.5,2434.2969" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1112.5" x2="1483.5" y1="2434.2969" y2="2434.2969"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="2427.4629">[39]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="1161.5" y="2427.4629">HTTP 200 Response</text><polygon fill="#383838" points="894.5,2471.9688,884.5,2475.9688,894.5,2479.9688,890.5,2475.9688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="888.5" x2="1106.5" y1="2475.9688" y2="2475.9688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="900.5" y="2469.1348">[40]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="942.5" y="2469.1348">Response</text><polygon fill="#383838" points="146.5,2513.6406,136.5,2517.6406,146.5,2521.6406,142.5,2517.6406" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="140.5" x2="882.5" y1="2517.6406" y2="2517.6406"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="152.5" y="2510.8066">[41]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="194.5" y="2510.8066">Response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="177.5" y1="2559.3125" y2="2559.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="177.5" x2="177.5" y1="2559.3125" y2="2572.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="136.5" x2="177.5" y1="2572.3125" y2="2572.3125"/><polygon fill="#383838" points="146.5,2568.3125,136.5,2572.3125,146.5,2576.3125,142.5,2572.3125" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="2552.4785">[42]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="494" x="184.5" y="2552.4785">Obtain concent from Payer on Fees and Payee Info</text><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="177.5" y1="2613.9844" y2="2613.9844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="177.5" x2="177.5" y1="2613.9844" y2="2626.9844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="136.5" x2="177.5" y1="2626.9844" y2="2626.9844"/><polygon fill="#383838" points="146.5,2622.9844,136.5,2626.9844,146.5,2630.9844,142.5,2626.9844" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="2607.1504">[43]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="139" x="184.5" y="2607.1504">Reserve funds</text><polygon fill="#383838" points="871.5,2664.6563,881.5,2668.6563,871.5,2672.6563,875.5,2668.6563" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="877.5" y1="2668.6563" y2="2668.6563"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="2661.8223">[44]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="184.5" y="2661.8223">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="228" x="236.5" y="2661.8223">/sendmoney/{transferId}</text><polygon fill="#383838" points="1090.5,2706.3281,1100.5,2710.3281,1090.5,2714.3281,1094.5,2710.3281" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="883.5" x2="1096.5" y1="2710.3281" y2="2710.3281"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="890.5" y="2703.4941">[45]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="932.5" y="2703.4941">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="984.5" y="2703.4941">/transfers</text><polygon fill="#383838" points="1477.5,2748,1487.5,2752,1477.5,2756,1481.5,2752" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1112.5" x2="1483.5" y1="2752" y2="2752"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="2745.166">[46]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1161.5" y="2745.166">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1229.5" y="2745.166">/transfers</text><polygon fill="#383838" points="1123.5,2789.6719,1113.5,2793.6719,1123.5,2797.6719,1119.5,2793.6719" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1117.5" x2="1488.5" y1="2793.6719" y2="2793.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="2786.8379">[47]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="196" x="1171.5" y="2786.8379">HTTP 202 response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="2835.3438" y2="2835.3438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="2835.3438" y2="2848.3438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="2848.3438" y2="2848.3438"/><polygon fill="#383838" points="1500.5,2844.3438,1490.5,2848.3438,1500.5,2852.3438,1496.5,2848.3438" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="2828.5098">[48]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="267" x="1538.5" y="2828.5098">Reserve Payer DFSP funds</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="2917.6875" y2="2917.6875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="2917.6875" y2="2930.6875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="2930.6875" y2="2930.6875"/><polygon fill="#383838" points="1500.5,2926.6875,1490.5,2930.6875,1500.5,2934.6875,1496.5,2930.6875" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="2897.0176">[49]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="316" x="1538.5" y="2883.1816">Pass on transfer to Payee DFSP</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="50" x="1544.5" y="2910.8535">using</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1600.5" y="2910.8535">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1668.5" y="2910.8535">/transfers</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1489.5" x2="1531.5" y1="2972.3594" y2="2972.3594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1531.5" x2="1531.5" y1="2972.3594" y2="2985.3594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1490.5" x2="1531.5" y1="2985.3594" y2="2985.3594"/><polygon fill="#383838" points="1500.5,2981.3594,1490.5,2985.3594,1500.5,2989.3594,1496.5,2985.3594" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1496.5" y="2965.5254">[50]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="262" x="1538.5" y="2965.5254">Commit Payer DFSP funds</text><polygon fill="#383838" points="1123.5,3023.0313,1113.5,3027.0313,1123.5,3031.0313,1119.5,3027.0313" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1117.5" x2="1488.5" y1="3027.0313" y2="3027.0313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1129.5" y="3020.1973">[51]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="1171.5" y="3020.1973">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="128" x="1223.5" y="3020.1973">/transfers/{Id}</text><polygon fill="#383838" points="1477.5,3064.7031,1487.5,3068.7031,1477.5,3072.7031,1481.5,3068.7031" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1112.5" x2="1483.5" y1="3068.7031" y2="3068.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1119.5" y="3061.8691">[52]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="1161.5" y="3061.8691">HTTP 200 Response</text><polygon fill="#383838" points="894.5,3106.375,884.5,3110.375,894.5,3114.375,890.5,3110.375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="888.5" x2="1106.5" y1="3110.375" y2="3110.375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="900.5" y="3103.541">[53]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="942.5" y="3103.541">response</text><polygon fill="#383838" points="146.5,3148.0469,136.5,3152.0469,146.5,3156.0469,142.5,3152.0469" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="140.5" x2="882.5" y1="3152.0469" y2="3152.0469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="152.5" y="3145.2129">[54]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="194.5" y="3145.2129">response</text><path d="M13,3167.0469 L82,3167.0469 L82,3186.0469 L72,3196.0469 L13,3196.0469 L13,3167.0469 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="181.3594" style="stroke: #000000; stroke-width: 2.0;" width="455" x="13" y="3167.0469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="28" y="3190.8848">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="366" x="97" y="3191.8848">[if (transferStatus== 'COMMITTED')]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="177.5" y1="3243.0625" y2="3243.0625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="177.5" x2="177.5" y1="3243.0625" y2="3256.0625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="136.5" x2="177.5" y1="3256.0625" y2="3256.0625"/><polygon fill="#383838" points="146.5,3252.0625,136.5,3256.0625,146.5,3260.0625,142.5,3256.0625" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="3236.2285">[55]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="152" x="184.5" y="3236.2285">Finalise transfer</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="468" y1="3265.0625" y2="3265.0625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="18" y="3287.9004">[else]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="135.5" x2="177.5" y1="3327.4063" y2="3327.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="177.5" x2="177.5" y1="3327.4063" y2="3340.4063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="136.5" x2="177.5" y1="3340.4063" y2="3340.4063"/><polygon fill="#383838" points="146.5,3336.4063,136.5,3340.4063,146.5,3344.4063,142.5,3340.4063" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="142.5" y="3320.5723">[56]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="161" x="184.5" y="3320.5723">Rollback transfer</text><!--MD5=[9a6cafe9a68780823fe02b009a9627a7]
@startuml Payer DFSP Integration Single Transactional Flow
/'*****
- - - - - - - - - - - - - -
******'/

skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 22
skinparam defaultFontSize 22
skinparam noteFontSize 22
skinparam monochrome true
' declare title
' title Core-Connector transactional flow patterns
' declare actors
participant "Core banking solution" as CBS
box "Payment Manager" #LightGrey
participant "Core\nConnector" as CC 
participant "Mojaloop\nConnector" as MC 
end box
participant "Mojaloop\nSwitch" as Switch
autonumber 1 1 "<b>[0]"

== Payer DFSP integration - 2 phase commit - single phase ==

CBS->CBS: Reserve funds
CBS->CC: **POST** /sendMoney \n(AUTO_ACCEPT_PARTY = true, AUTO_ACCEPT_QUOTES = true)
CC->MC: **POST** /transfers
activate MC
MC->Switch: **GET** /parties/{Type}/{ID}/{SubId}
Switch- ->MC: HTTP 202 response
Switch->Switch: Determine Payee DFSP using oracle
Switch->Switch: Lookup Payee Information from Payee DFSP\n using **GET** /parties
Switch->MC: **PUT** /parties/{Type}/{ID}/{SubId}
MC- ->Switch: HTTP 200 Response
rnote left MC
  Accept Party
endrnote
MC->Switch: **POST** /quotes
Switch- ->MC: HTTP 202 response
Switch->Switch: Pass on quote to Payee DFSP\n using **POST** /quotes
Switch->MC: **PUT** /quotes/{Id}
MC- ->Switch: HTTP 200 Response
rnote left MC
  Accept Quote
endrnote
MC->Switch: **POST** /transfers
Switch- ->MC: HTTP 202 response
Switch->Switch: Reserve Payer DFSP funds
Switch->Switch: Pass on transfer to Payee DFSP\n using **POST** /transfers
Switch->Switch: Calculate fees
Switch->Switch: Commit Payer DFSP funds
Switch->MC: **PUT** /transfers/{Id}
MC- ->Switch: HTTP 200 Response
MC- ->CC: response
deactivate MC
CC- ->CBS: response
alt if (transferStatus== 'COMMITTED')
CBS->CBS: Finalise transfer
else else
CBS->CBS: Rollback transfer
end 
== Payer DFSP integration - 2 phase commit - with user confirmation ==

CBS->CC: **POST** /sendMoney \n(AUTO_ACCEPT_PARTY = true, AUTO_ACCEPT_QUOTES = **false**)
CC->MC: **POST** /transfers
activate MC
MC->Switch: **GET** /parties/{Type}/{ID}/{SubId}
Switch- ->MC: HTTP 202 response
Switch->Switch: Determine Payee DFSP using oracle
Switch->Switch: Lookup Payee Information from Payee DFSP\n using **GET** /parties
Switch->MC: **PUT** /parties/{Type}/{ID}/{SubId}
MC- ->Switch: HTTP 200 Response
rnote left MC
  Accept Party
endrnote
MC->Switch: **POST** /quotes
Switch- ->MC: HTTP 202 response
Switch->Switch: Pass on quote to Payee DFSP\n using **POST** /quotes
Switch->MC: **PUT** /quotes/{Id}
MC- ->Switch: HTTP 200 Response
MC- ->CC: Response
deactivate MC
CC- ->CBS: Response
CBS->CBS: Obtain concent from Payer on Fees and Payee Info
CBS->CBS: Reserve funds
CBS->CC: **PUT** /sendmoney/{transferId}
CC->MC: **PUT** /transfers

activate MC
MC->Switch: **POST** /transfers
Switch- ->MC: HTTP 202 response
Switch->Switch: Reserve Payer DFSP funds
Switch->Switch: Pass on transfer to Payee DFSP\n using **POST** /transfers
Switch->Switch: Commit Payer DFSP funds
Switch->MC: **PUT** /transfers/{Id}
MC- ->Switch: HTTP 200 Response
MC- ->CC: response
deactivate MC
CC- ->CBS: response
alt if (transferStatus== 'COMMITTED')
CBS->CBS: Finalise transfer
else else
CBS->CBS: Rollback transfer
end 
@enduml

@startuml Payer DFSP Integration Single Transactional Flow

skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 22
skinparam defaultFontSize 22
skinparam noteFontSize 22
skinparam monochrome true
participant "Core banking solution" as CBS
box "Payment Manager" #LightGrey
participant "Core\nConnector" as CC 
participant "Mojaloop\nConnector" as MC 
end box
participant "Mojaloop\nSwitch" as Switch
autonumber 1 1 "<b>[0]"

== Payer DFSP integration - 2 phase commit - single phase ==

CBS->CBS: Reserve funds
CBS->CC: **POST** /sendMoney \n(AUTO_ACCEPT_PARTY = true, AUTO_ACCEPT_QUOTES = true)
CC->MC: **POST** /transfers
activate MC
MC->Switch: **GET** /parties/{Type}/{ID}/{SubId}
Switch- ->MC: HTTP 202 response
Switch->Switch: Determine Payee DFSP using oracle
Switch->Switch: Lookup Payee Information from Payee DFSP\n using **GET** /parties
Switch->MC: **PUT** /parties/{Type}/{ID}/{SubId}
MC- ->Switch: HTTP 200 Response
rnote left MC
  Accept Party
endrnote
MC->Switch: **POST** /quotes
Switch- ->MC: HTTP 202 response
Switch->Switch: Pass on quote to Payee DFSP\n using **POST** /quotes
Switch->MC: **PUT** /quotes/{Id}
MC- ->Switch: HTTP 200 Response
rnote left MC
  Accept Quote
endrnote
MC->Switch: **POST** /transfers
Switch- ->MC: HTTP 202 response
Switch->Switch: Reserve Payer DFSP funds
Switch->Switch: Pass on transfer to Payee DFSP\n using **POST** /transfers
Switch->Switch: Calculate fees
Switch->Switch: Commit Payer DFSP funds
Switch->MC: **PUT** /transfers/{Id}
MC- ->Switch: HTTP 200 Response
MC- ->CC: response
deactivate MC
CC- ->CBS: response
alt if (transferStatus== 'COMMITTED')
CBS->CBS: Finalise transfer
else else
CBS->CBS: Rollback transfer
end 
== Payer DFSP integration - 2 phase commit - with user confirmation ==

CBS->CC: **POST** /sendMoney \n(AUTO_ACCEPT_PARTY = true, AUTO_ACCEPT_QUOTES = **false**)
CC->MC: **POST** /transfers
activate MC
MC->Switch: **GET** /parties/{Type}/{ID}/{SubId}
Switch- ->MC: HTTP 202 response
Switch->Switch: Determine Payee DFSP using oracle
Switch->Switch: Lookup Payee Information from Payee DFSP\n using **GET** /parties
Switch->MC: **PUT** /parties/{Type}/{ID}/{SubId}
MC- ->Switch: HTTP 200 Response
rnote left MC
  Accept Party
endrnote
MC->Switch: **POST** /quotes
Switch- ->MC: HTTP 202 response
Switch->Switch: Pass on quote to Payee DFSP\n using **POST** /quotes
Switch->MC: **PUT** /quotes/{Id}
MC- ->Switch: HTTP 200 Response
MC- ->CC: Response
deactivate MC
CC- ->CBS: Response
CBS->CBS: Obtain concent from Payer on Fees and Payee Info
CBS->CBS: Reserve funds
CBS->CC: **PUT** /sendmoney/{transferId}
CC->MC: **PUT** /transfers

activate MC
MC->Switch: **POST** /transfers
Switch- ->MC: HTTP 202 response
Switch->Switch: Reserve Payer DFSP funds
Switch->Switch: Pass on transfer to Payee DFSP\n using **POST** /transfers
Switch->Switch: Commit Payer DFSP funds
Switch->MC: **PUT** /transfers/{Id}
MC- ->Switch: HTTP 200 Response
MC- ->CC: response
deactivate MC
CC- ->CBS: response
alt if (transferStatus== 'COMMITTED')
CBS->CBS: Finalise transfer
else else
CBS->CBS: Rollback transfer
end 
@enduml

PlantUML version 1.2020.13(Sat Jun 13 13:26:38 BST 2020)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>