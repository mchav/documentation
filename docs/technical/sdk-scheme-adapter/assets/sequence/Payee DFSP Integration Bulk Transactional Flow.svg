<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="6075px" preserveAspectRatio="none" style="width:2390px;height:6075px;" version="1.1" viewBox="0 0 2390 6075" width="2390px" zoomAndPan="magnify"><defs><filter height="300%" id="f1eoqzgtbbfg5h" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#D3D3D3" height="6060.125" style="stroke: #383838; stroke-width: 1.0;" width="727" x="899" y="4"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182" x="1171.5" y="26.8379">Payment Manager</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="1199" y="54.5098">Payee DFSP</text><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="125.0156" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="320.375"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="208.3594" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="844.7813"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="125.0156" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="1560.875"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="179.6875" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="2114.2813"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="96.3438" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="2531"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="96.3438" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="3107.4063"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="396.7188" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="3604.4688"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="96.3438" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="4484.5938"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="179.6875" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="5061"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="179.6875" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="5690.75"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="155.3594" style="stroke: #000000; stroke-width: 2.0;" width="821" x="210" y="460.3906"/><rect fill="#FFFFFF" height="71.3438" style="stroke: none; stroke-width: 1.0;" width="821" x="210" y="544.4063"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="374.7188" style="stroke: #000000; stroke-width: 2.0;" width="1250.5" x="893" y="768.7656"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="373.7188" style="stroke: #000000; stroke-width: 2.0;" width="1250.5" x="893" y="1457.1875"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="319.0469" style="stroke: #000000; stroke-width: 2.0;" width="1419" x="893" y="1982.9219"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="262.7031" style="stroke: #000000; stroke-width: 2.0;" width="835" x="893" y="2454.9844"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="317.375" style="stroke: #000000; stroke-width: 2.0;" width="840" x="893" y="3031.3906"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="754.7813" style="stroke: #000000; stroke-width: 2.0;" width="1944" x="378" y="3500.7813"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="587.4219" style="stroke: #000000; stroke-width: 2.0;" width="1924" x="388" y="3661.1406"/><rect fill="#FFFFFF" height="407.0625" style="stroke: none; stroke-width: 1.0;" width="1924" x="388" y="3841.5"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="262.7031" style="stroke: #000000; stroke-width: 2.0;" width="835" x="893" y="4408.5781"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="400.7188" style="stroke: #000000; stroke-width: 2.0;" width="1445" x="893" y="4984.9844"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="432.0625" style="stroke: #000000; stroke-width: 2.0;" width="1485" x="883" y="5537.7188"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="375.7188" style="stroke: #000000; stroke-width: 2.0;" width="1465" x="893" y="5587.0625"/><rect fill="#FFFFFF" height="84.3438" style="stroke: none; stroke-width: 1.0;" width="1465" x="893" y="5878.4375"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="274" x2="274" y1="137.6875" y2="5986.7813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="962" x2="962" y1="137.6875" y2="5986.7813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1563" x2="1563" y1="137.6875" y2="5986.7813"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="2020.5" x2="2020.5" y1="137.6875" y2="5986.7813"/><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="104" x="220" y="63.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="227" y="93.1816">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="240.5" y="120.8535">Switch</text><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="104" x="220" y="5985.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="227" y="6015.6191">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="63" x="240.5" y="6043.291">Switch</text><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="903" y="63.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="915" y="93.1816">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="910" y="120.8535">Connector</text><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="903" y="5985.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="915" y="6015.6191">Mojaloop</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="910" y="6043.291">Connector</text><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1504" y="63.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="1537" y="93.1816">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1511" y="120.8535">Connector</text><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="69.3438" style="stroke: #383838; stroke-width: 1.5;" width="114" x="1504" y="5985.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="48" x="1537" y="6015.6191">Core</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="100" x="1511" y="6043.291">Connector</text><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="221" x="1908.5" y="91.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="207" x="1915.5" y="120.8535">Core banking solution</text><rect fill="#F8F8F8" filter="url(#f1eoqzgtbbfg5h)" height="41.6719" style="stroke: #383838; stroke-width: 1.5;" width="221" x="1908.5" y="5985.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="207" x="1915.5" y="6015.6191">Core banking solution</text><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="125.0156" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="320.375"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="208.3594" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="844.7813"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="125.0156" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="1560.875"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="179.6875" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="2114.2813"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="96.3438" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="2531"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="96.3438" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="3107.4063"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="396.7188" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="3604.4688"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="96.3438" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="4484.5938"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="179.6875" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="5061"/><rect fill="#FFFFFF" filter="url(#f1eoqzgtbbfg5h)" height="179.6875" style="stroke: #383838; stroke-width: 1.0;" width="10" x="957" y="5690.75"/><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2375" x="3" y="174.5234"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="174.5234" y2="174.5234"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="177.5234" y2="177.5234"/><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="35.6719" style="stroke: #000000; stroke-width: 2.0;" width="382" x="999.5" y="157.6875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="362" x="1005.5" y="184.5254">Payee DFSP integration - Discovery</text><polygon fill="#383838" points="950,233.0313,960,237.0313,950,241.0313,954,237.0313" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="237.0313" y2="237.0313"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="281" y="230.1973">[1]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="311" y="230.1973">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="87" x="364" y="230.1973">/getParty</text><polygon fill="#383838" points="285,274.7031,275,278.7031,285,282.7031,281,278.7031" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="278.7031" y2="278.7031"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="291" y="271.8691">[2]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="321" y="271.8691">HTTP 202 Response</text><polygon fill="#383838" points="1551,316.375,1561,320.375,1551,324.375,1555,320.375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="320.375" y2="320.375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="974" y="313.541">[3]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1004" y="313.541">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="87" x="1057" y="313.541">/getParty</text><polygon fill="#383838" points="2009,358.0469,2019,362.0469,2009,366.0469,2013,362.0469" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="362.0469" y2="362.0469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1570" y="355.2129">[4]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1600" y="355.2129">GET</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="156" x="1653" y="355.2129">[account lookup]</text><polygon fill="#383838" points="1574,399.7188,1564,403.7188,1574,407.7188,1570,403.7188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="403.7188" y2="403.7188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="1580" y="396.8848">[5]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="1610" y="396.8848">Response</text><polygon fill="#383838" points="973,441.3906,963,445.3906,973,449.3906,969,445.3906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="445.3906" y2="445.3906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="979" y="438.5566">[6]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="1009" y="438.5566">Response</text><path d="M210,460.3906 L279,460.3906 L279,479.3906 L269,489.3906 L210,489.3906 L210,460.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="155.3594" style="stroke: #000000; stroke-width: 2.0;" width="821" x="210" y="460.3906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="225" y="484.2285">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="294" y="485.2285">[If Success response]</text><polygon fill="#383838" points="285,532.4063,275,536.4063,285,540.4063,281,536.4063" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="536.4063" y2="536.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="291" y="529.5723">[7]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="321" y="529.5723">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="478" x="373" y="529.5723">/parties/{Type}/{Id} (or /parties/{Type}/{Id}/{SubId})</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="210" x2="1031" y1="545.4063" y2="545.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="185" x="215" y="568.2441">[if Error response]</text><polygon fill="#383838" points="285,603.75,275,607.75,285,611.75,281,607.75" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="607.75" y2="607.75"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="291" y="600.916">[8]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="321" y="600.916">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="582" x="373" y="600.916">/parties/{Type}/{Id}/error (or /parties/{Type}/{Id}/{SubId}/error)</text><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2375" x="3" y="649.5859"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="649.5859" y2="649.5859"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="652.5859" y2="652.5859"/><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="35.6719" style="stroke: #000000; stroke-width: 2.0;" width="880" x="750.5" y="632.75"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="860" x="756.5" y="659.5879">Payee DFSP integration - Quote and Transfer - 2 phase commit with prior AML check</text><polygon fill="#383838" points="950,708.0938,960,712.0938,950,716.0938,954,712.0938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="712.0938" y2="712.0938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="281" y="705.2598">[9]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="311" y="705.2598">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="108" x="379" y="705.2598">/bulkquotes</text><polygon fill="#383838" points="285,749.7656,275,753.7656,285,757.7656,281,753.7656" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="753.7656" y2="753.7656"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="746.9316">[10]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="333" y="746.9316">HTTP 202 Response</text><path d="M893,768.7656 L982,768.7656 L982,787.7656 L972,797.7656 L893,797.7656 L893,768.7656 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="374.7188" style="stroke: #000000; stroke-width: 2.0;" width="1250.5" x="893" y="768.7656"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="908" y="792.6035">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="997" y="793.6035">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,840.7813,1561,844.7813,1551,848.7813,1555,844.7813" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="844.7813" y2="844.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="837.9473">[11]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1016" y="837.9473">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="131" x="1084" y="837.9473">/quoterequest</text><polygon fill="#383838" points="2009,882.4531,2019,886.4531,2009,890.4531,2013,886.4531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="886.4531" y2="886.4531"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="879.6191">[12]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1612" y="879.6191">AML</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="66" x="1663" y="879.6191">checks</text><polygon fill="#383838" points="1574,924.125,1564,928.125,1574,932.125,1570,928.125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="928.125" y2="928.125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="921.291">[13]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="1622" y="921.291">Response</text><polygon fill="#383838" points="2009,965.7969,2019,969.7969,2009,973.7969,2013,969.7969" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="969.7969" y2="969.7969"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="962.9629">[14]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="1612" y="962.9629">Calculate Fees</text><polygon fill="#383838" points="1574,1007.4688,1564,1011.4688,1574,1015.4688,1570,1011.4688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="1011.4688" y2="1011.4688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="1004.6348">[15]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="1622" y="1004.6348">Response</text><polygon fill="#383838" points="973,1049.1406,963,1053.1406,973,1057.1406,969,1053.1406" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="1053.1406" y2="1053.1406"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="1046.3066">[16]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="1021" y="1046.3066">Response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="1122.4844" y2="1122.4844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="1122.4844" y2="1135.4844"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="1135.4844" y2="1135.4844"/><polygon fill="#383838" points="973,1131.4844,963,1135.4844,973,1139.4844,969,1135.4844" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="1101.8145">[17]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="1011" y="1087.9785">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="254" x="1011" y="1115.6504">and attach quote response</text><polygon fill="#383838" points="285,1180.1563,275,1184.1563,285,1188.1563,281,1184.1563" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="1184.1563" y2="1184.1563"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="1177.3223">[18]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="333" y="1177.3223">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="146" x="385" y="1177.3223">/bulkquotes/{Id}</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="1252" y2="1252"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="1252" y2="1265"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="1265" y2="1265"/><polygon fill="#383838" points="285,1261,275,1265,285,1269,281,1265" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="1245.166">[19]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="202" x="323" y="1245.166">Pass Quote to Payer</text><path d="M8,1197.1563 L8,1290.1563 L265,1290.1563 L265,1207.1563 L255,1197.1563 L8,1197.1563 " fill="#ECECEC" filter="url(#f1eoqzgtbbfg5h)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M255,1197.1563 L255,1207.1563 L265,1207.1563 L255,1197.1563 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="169" x="14" y="1224.9941">Obtain consent to</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="236" x="14" y="1252.666">proceed with the transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="32" x="14" y="1280.3379">Via</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="52" y="1280.3379">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="120" y="1280.3379">/bulktransfers</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="1332.8438" y2="1332.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="1332.8438" y2="1345.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="1345.8438" y2="1345.8438"/><polygon fill="#383838" points="285,1341.8438,275,1345.8438,285,1349.8438,281,1345.8438" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="1326.0098">[20]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="273" x="323" y="1326.0098">Perform liquidity(NDC)check</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="1387.5156" y2="1387.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="1387.5156" y2="1400.5156"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="1400.5156" y2="1400.5156"/><polygon fill="#383838" points="285,1396.5156,275,1400.5156,285,1404.5156,281,1400.5156" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="1380.6816">[21]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="368" x="323" y="1380.6816">Reserve Funds at indivial transfer level</text><polygon fill="#383838" points="950,1438.1875,960,1442.1875,950,1446.1875,954,1442.1875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="1442.1875" y2="1442.1875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="1435.3535">[22]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="323" y="1435.3535">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="391" y="1435.3535">/bulktransfers</text><path d="M893,1457.1875 L982,1457.1875 L982,1476.1875 L972,1486.1875 L893,1486.1875 L893,1457.1875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="373.7188" style="stroke: #000000; stroke-width: 2.0;" width="1250.5" x="893" y="1457.1875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="908" y="1481.0254">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="997" y="1482.0254">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,1556.875,1561,1560.875,1551,1564.875,1555,1560.875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="1560.875" y2="1560.875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="1540.2051">[23]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="260" x="1016" y="1526.3691">Create &amp; Reserve Transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1022" y="1554.041"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1022" y="1554.041">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1090" y="1554.041">/transfers</text><polygon fill="#383838" points="2009,1598.5469,2019,1602.5469,2009,1606.5469,2013,1602.5469" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="1602.5469" y2="1602.5469"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="1595.7129">[24]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="139" x="1612" y="1595.7129">Reserve funds</text><polygon fill="#383838" points="1574,1640.2188,1564,1644.2188,1574,1648.2188,1570,1644.2188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="1644.2188" y2="1644.2188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="1637.3848">[25]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="294" x="1622" y="1637.3848">response (homeTransactionId)</text><polygon fill="#383838" points="973,1681.8906,963,1685.8906,973,1689.8906,969,1685.8906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="1685.8906" y2="1685.8906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="1679.0566">[26]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="294" x="1021" y="1679.0566">response (homeTransactionId)</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="1727.5625" y2="1727.5625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="1727.5625" y2="1740.5625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="1740.5625" y2="1740.5625"/><polygon fill="#383838" points="973,1736.5625,963,1740.5625,973,1744.5625,969,1740.5625" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="1720.7285">[27]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="186" x="1011" y="1720.7285">Generate Fulfilment</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="1809.9063" y2="1809.9063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="1809.9063" y2="1822.9063"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="1822.9063" y2="1822.9063"/><polygon fill="#383838" points="973,1818.9063,963,1822.9063,973,1826.9063,969,1822.9063" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="1789.2363">[28]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="1011" y="1775.4004">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="273" x="1011" y="1803.0723">and attach transfer response</text><polygon fill="#383838" points="285,1867.5781,275,1871.5781,285,1875.5781,281,1871.5781" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="1871.5781" y2="1871.5781"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="1864.7441">[29]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="333" y="1864.7441">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="454" x="385" y="1864.7441">/bulktransfers/{id} (BulkStatus='PROCESSING')</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="274" x2="316" y1="1913.25" y2="1913.25"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="316" x2="316" y1="1913.25" y2="1926.25"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="275" x2="316" y1="1926.25" y2="1926.25"/><polygon fill="#383838" points="285,1922.25,275,1926.25,285,1930.25,281,1926.25" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="1906.416">[30]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="520" x="323" y="1906.416">Commit funds at indivial transfer level in DFSP ledgers</text><polygon fill="#383838" points="950,1963.9219,960,1967.9219,950,1971.9219,954,1967.9219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="1967.9219" y2="1967.9219"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="1961.0879">[31]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="323" y="1961.0879">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="445" x="406" y="1961.0879">/bulktransfers/{id} (BulkStatus='COMPLETED')</text><path d="M893,1982.9219 L982,1982.9219 L982,2001.9219 L972,2011.9219 L893,2011.9219 L893,1982.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="319.0469" style="stroke: #000000; stroke-width: 2.0;" width="1419" x="893" y="1982.9219"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="908" y="2006.7598">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="997" y="2007.7598">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,2110.2813,1561,2114.2813,1551,2118.2813,1555,2114.2813" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="2114.2813" y2="2114.2813"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="2079.7754">[32]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="163" x="1016" y="2052.1035">Commit Transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1022" y="2079.7754"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="1022" y="2079.7754">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="1105" y="2079.7754">/transfers/{id}</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="510" x="1016" y="2107.4473">(TransferStatus='COMMITTED', homeTransactionId)</text><polygon fill="#383838" points="2009,2151.9531,2019,2155.9531,2009,2159.9531,2013,2155.9531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="2155.9531" y2="2155.9531"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="2149.1191">[33]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="134" x="1612" y="2149.1191">Commit funds</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2021" x2="2063" y1="2197.625" y2="2197.625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2063" x2="2063" y1="2197.625" y2="2210.625"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2022" x2="2063" y1="2210.625" y2="2210.625"/><polygon fill="#383838" points="2032,2206.625,2022,2210.625,2032,2214.625,2028,2210.625" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2028" y="2190.791">[34]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="230" x="2070" y="2190.791">Release funds to Payee</text><polygon fill="#383838" points="1574,2248.2969,1564,2252.2969,1574,2256.2969,1570,2252.2969" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="2252.2969" y2="2252.2969"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="2245.4629">[35]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1622" y="2245.4629">response</text><polygon fill="#383838" points="973,2289.9688,963,2293.9688,973,2297.9688,969,2293.9688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="2293.9688" y2="2293.9688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="2287.1348">[36]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1021" y="2287.1348">response</text><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2375" x="3" y="2335.8047"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="2335.8047" y2="2335.8047"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="2338.8047" y2="2338.8047"/><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="35.6719" style="stroke: #000000; stroke-width: 2.0;" width="937" x="722" y="2318.9688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="917" x="728" y="2345.8066">Payee DFSP integration - Quote and Transfer - single AML check &amp; transfer during PATCH</text><polygon fill="#383838" points="950,2394.3125,960,2398.3125,950,2402.3125,954,2398.3125" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="2398.3125" y2="2398.3125"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="2391.4785">[37]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="323" y="2391.4785">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="108" x="391" y="2391.4785">/bulkquotes</text><polygon fill="#383838" points="285,2435.9844,275,2439.9844,285,2443.9844,281,2439.9844" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="2439.9844" y2="2439.9844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="2433.1504">[38]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="333" y="2433.1504">HTTP 202 Response</text><path d="M893,2454.9844 L982,2454.9844 L982,2473.9844 L972,2483.9844 L893,2483.9844 L893,2454.9844 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="262.7031" style="stroke: #000000; stroke-width: 2.0;" width="835" x="893" y="2454.9844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="908" y="2478.8223">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="997" y="2479.8223">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,2527,1561,2531,1551,2535,1555,2531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="2531" y2="2531"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="2524.166">[39]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1016" y="2524.166">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="131" x="1084" y="2524.166">/quoterequest</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="1605" y1="2572.6719" y2="2572.6719"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1605" x2="1605" y1="2572.6719" y2="2585.6719"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1564" x2="1605" y1="2585.6719" y2="2585.6719"/><polygon fill="#383838" points="1574,2581.6719,1564,2585.6719,1574,2589.6719,1570,2585.6719" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="2565.8379">[40]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="104" x="1612" y="2565.8379">Do nothing</text><polygon fill="#383838" points="973,2623.3438,963,2627.3438,973,2631.3438,969,2627.3438" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="2627.3438" y2="2627.3438"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="2620.5098">[41]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="1021" y="2620.5098">Response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="2696.6875" y2="2696.6875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="2696.6875" y2="2709.6875"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="2709.6875" y2="2709.6875"/><polygon fill="#383838" points="973,2705.6875,963,2709.6875,973,2713.6875,969,2709.6875" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="2676.0176">[42]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="1011" y="2662.1816">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="254" x="1011" y="2689.8535">and attach quote response</text><polygon fill="#383838" points="285,2754.3594,275,2758.3594,285,2762.3594,281,2758.3594" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="2758.3594" y2="2758.3594"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="2751.5254">[43]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="333" y="2751.5254">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="146" x="385" y="2751.5254">/bulkquotes/{Id}</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="2826.2031" y2="2826.2031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="2826.2031" y2="2839.2031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="2839.2031" y2="2839.2031"/><polygon fill="#383838" points="285,2835.2031,275,2839.2031,285,2843.2031,281,2839.2031" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="2819.3691">[44]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="267" x="323" y="2819.3691">Pass Quote to Payer DFSP</text><path d="M8,2771.3594 L8,2864.3594 L265,2864.3594 L265,2781.3594 L255,2771.3594 L8,2771.3594 " fill="#ECECEC" filter="url(#f1eoqzgtbbfg5h)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M255,2771.3594 L255,2781.3594 L265,2781.3594 L255,2771.3594 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="169" x="14" y="2799.1973">Obtain consent to</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="236" x="14" y="2826.8691">proceed with the transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="32" x="14" y="2854.541">Via</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="52" y="2854.541">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="120" y="2854.541">/bulktransfers</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="2907.0469" y2="2907.0469"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="2907.0469" y2="2920.0469"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="2920.0469" y2="2920.0469"/><polygon fill="#383838" points="285,2916.0469,275,2920.0469,285,2924.0469,281,2920.0469" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="2900.2129">[45]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="273" x="323" y="2900.2129">Perform liquidity(NDC)check</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="2961.7188" y2="2961.7188"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="2961.7188" y2="2974.7188"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="2974.7188" y2="2974.7188"/><polygon fill="#383838" points="285,2970.7188,275,2974.7188,285,2978.7188,281,2974.7188" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="2954.8848">[46]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="368" x="323" y="2954.8848">Reserve Funds at indivial transfer level</text><polygon fill="#383838" points="950,3012.3906,960,3016.3906,950,3020.3906,954,3016.3906" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="3016.3906" y2="3016.3906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="3009.5566">[47]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="323" y="3009.5566">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="391" y="3009.5566">/bulktransfers</text><path d="M893,3031.3906 L982,3031.3906 L982,3050.3906 L972,3060.3906 L893,3060.3906 L893,3031.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="317.375" style="stroke: #000000; stroke-width: 2.0;" width="840" x="893" y="3031.3906"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="908" y="3055.2285">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="997" y="3056.2285">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,3103.4063,1561,3107.4063,1551,3111.4063,1555,3107.4063" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="3107.4063" y2="3107.4063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="3100.5723">[48]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1016" y="3100.5723">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1084" y="3100.5723">/transfers</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="1605" y1="3149.0781" y2="3149.0781"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1605" x2="1605" y1="3149.0781" y2="3162.0781"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1564" x2="1605" y1="3162.0781" y2="3162.0781"/><polygon fill="#383838" points="1574,3158.0781,1564,3162.0781,1574,3166.0781,1570,3162.0781" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="3142.2441">[49]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="109" x="1612" y="3142.2441">Do Nothing</text><polygon fill="#383838" points="973,3199.75,963,3203.75,973,3207.75,969,3203.75" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="3203.75" y2="3203.75"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="3196.916">[50]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1021" y="3196.916">response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="3245.4219" y2="3245.4219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="3245.4219" y2="3258.4219"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="3258.4219" y2="3258.4219"/><polygon fill="#383838" points="973,3254.4219,963,3258.4219,973,3262.4219,969,3258.4219" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="3238.5879">[51]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="186" x="1011" y="3238.5879">Generate Fulfilment</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="3327.7656" y2="3327.7656"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="3327.7656" y2="3340.7656"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="3340.7656" y2="3340.7656"/><polygon fill="#383838" points="973,3336.7656,963,3340.7656,973,3344.7656,969,3340.7656" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="3307.0957">[52]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="1011" y="3293.2598">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="273" x="1011" y="3320.9316">and attach transfer response</text><polygon fill="#383838" points="285,3385.4375,275,3389.4375,285,3393.4375,281,3389.4375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="3389.4375" y2="3389.4375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="3382.6035">[53]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="333" y="3382.6035">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="454" x="385" y="3382.6035">/bulktransfers/{id} (BulkStatus='PROCESSING')</text><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="274" x2="316" y1="3431.1094" y2="3431.1094"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="316" x2="316" y1="3431.1094" y2="3444.1094"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="275" x2="316" y1="3444.1094" y2="3444.1094"/><polygon fill="#383838" points="285,3440.1094,275,3444.1094,285,3448.1094,281,3444.1094" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="3424.2754">[54]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="520" x="323" y="3424.2754">Commit funds at indivial transfer level in DFSP ledgers</text><polygon fill="#383838" points="950,3481.7813,960,3485.7813,950,3489.7813,954,3485.7813" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="3485.7813" y2="3485.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="3478.9473">[55]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="323" y="3478.9473">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="445" x="406" y="3478.9473">/bulktransfers/{id} (BulkStatus='COMPLETED')</text><path d="M378,3500.7813 L467,3500.7813 L467,3519.7813 L457,3529.7813 L378,3529.7813 L378,3500.7813 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="754.7813" style="stroke: #000000; stroke-width: 2.0;" width="1944" x="378" y="3500.7813"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="393" y="3524.6191">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="482" y="3525.6191">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,3600.4688,1561,3604.4688,1551,3608.4688,1555,3604.4688" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="3604.4688" y2="3604.4688"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="3583.7988">[56]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="163" x="1016" y="3569.9629">Commit Transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1022" y="3597.6348"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="1022" y="3597.6348">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="446" x="1105" y="3597.6348">/transfers/{id} (TransferStatus='COMMITTED')</text><polygon fill="#383838" points="2009,3642.1406,2019,3646.1406,2009,3650.1406,2013,3646.1406" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="3646.1406" y2="3646.1406"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="3639.3066">[57]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="392" x="1612" y="3639.3066">Performn AML checks and transfer funds</text><path d="M388,3661.1406 L457,3661.1406 L457,3680.1406 L447,3690.1406 L388,3690.1406 L388,3661.1406 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="587.4219" style="stroke: #000000; stroke-width: 2.0;" width="1924" x="388" y="3661.1406"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="403" y="3684.9785">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="472" y="3685.9785">[if (AML checks pass)]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2021" x2="2063" y1="3737.1563" y2="3737.1563"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2063" x2="2063" y1="3737.1563" y2="3750.1563"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2022" x2="2063" y1="3750.1563" y2="3750.1563"/><polygon fill="#383838" points="2032,3746.1563,2022,3750.1563,2032,3754.1563,2028,3750.1563" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2028" y="3730.3223">[58]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="230" x="2070" y="3730.3223">Release funds to Payee</text><polygon fill="#383838" points="1574,3787.8281,1564,3791.8281,1574,3795.8281,1570,3791.8281" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="3791.8281" y2="3791.8281"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="3784.9941">[59]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1622" y="3784.9941">response</text><polygon fill="#383838" points="978,3829.5,968,3833.5,978,3837.5,974,3833.5" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="972" x2="1562" y1="3833.5" y2="3833.5"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="984" y="3826.666">[60]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1026" y="3826.666">response</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="388" x2="2312" y1="3842.5" y2="3842.5"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205" x="393" y="3865.3379">[if (AML checks fail)]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2021" x2="2063" y1="3904.8438" y2="3904.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2063" x2="2063" y1="3904.8438" y2="3917.8438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2022" x2="2063" y1="3917.8438" y2="3917.8438"/><polygon fill="#383838" points="2032,3913.8438,2022,3917.8438,2032,3921.8438,2028,3917.8438" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2028" y="3898.0098">[61]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="104" x="2070" y="3898.0098">Do nothing</text><polygon fill="#383838" points="1574,3955.5156,1564,3959.5156,1574,3963.5156,1570,3959.5156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="3959.5156" y2="3959.5156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="3952.6816">[62]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1622" y="3952.6816">response</text><polygon fill="#383838" points="973,3997.1875,963,4001.1875,973,4005.1875,969,4001.1875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="4001.1875" y2="4001.1875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="3994.3535">[63]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1021" y="3994.3535">response</text><rect fill="#ECECEC" filter="url(#f1eoqzgtbbfg5h)" height="229" style="stroke: #383838; stroke-width: 1.0;" width="559" x="398" y="4014.1875"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="466" x="402" y="4041.0254">Payee DFSP AML checks / other errors result in:</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="408" y="4068.6973"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="402" y="4096.3691">Reconciliation Error</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="201" x="420" y="4124.041">Payer has sent funds</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="266" x="420" y="4151.7129">Payer DFSP has sent funds</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="533" x="420" y="4179.3848">Hub considers that the Payee DFSP has received funds</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="395" x="420" y="4207.0566">Payee DFSP has rejected the transaction</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="284" x="420" y="4234.7285">Payee has not received funds</text><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="2375" x="3" y="4289.3984"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="4289.3984" y2="4289.3984"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="2378" y1="4292.3984" y2="4292.3984"/><rect fill="#EEEEEE" filter="url(#f1eoqzgtbbfg5h)" height="35.6719" style="stroke: #000000; stroke-width: 2.0;" width="1007" x="687" y="4272.5625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="987" x="693" y="4299.4004">Payee DFSP integration - Quote and Transfer - single AML check &amp; transfer during POST transfer</text><polygon fill="#383838" points="950,4347.9063,960,4351.9063,950,4355.9063,954,4351.9063" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="4351.9063" y2="4351.9063"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="4345.0723">[64]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="323" y="4345.0723">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="108" x="391" y="4345.0723">/bulkquotes</text><polygon fill="#383838" points="285,4389.5781,275,4393.5781,285,4397.5781,281,4393.5781" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="4393.5781" y2="4393.5781"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="4386.7441">[65]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="205" x="333" y="4386.7441">HTTP 202 Response</text><path d="M893,4408.5781 L982,4408.5781 L982,4427.5781 L972,4437.5781 L893,4437.5781 L893,4408.5781 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="262.7031" style="stroke: #000000; stroke-width: 2.0;" width="835" x="893" y="4408.5781"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="908" y="4432.416">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="997" y="4433.416">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,4480.5938,1561,4484.5938,1551,4488.5938,1555,4484.5938" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="4484.5938" y2="4484.5938"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="4477.7598">[66]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1016" y="4477.7598">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="142" x="1084" y="4477.7598">/quoterequests</text><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="1605" y1="4526.2656" y2="4526.2656"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1605" x2="1605" y1="4526.2656" y2="4539.2656"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1564" x2="1605" y1="4539.2656" y2="4539.2656"/><polygon fill="#383838" points="1574,4535.2656,1564,4539.2656,1574,4543.2656,1570,4539.2656" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="4519.4316">[67]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="104" x="1612" y="4519.4316">Do nothing</text><polygon fill="#383838" points="973,4576.9375,963,4580.9375,973,4584.9375,969,4580.9375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="4580.9375" y2="4580.9375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="4574.1035">[68]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="98" x="1021" y="4574.1035">Response</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="4650.2813" y2="4650.2813"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="4650.2813" y2="4663.2813"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="4663.2813" y2="4663.2813"/><polygon fill="#383838" points="973,4659.2813,963,4663.2813,973,4667.2813,969,4663.2813" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="4629.6113">[69]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="1011" y="4615.7754">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="254" x="1011" y="4643.4473">and attach quote response</text><polygon fill="#383838" points="285,4707.9531,275,4711.9531,285,4715.9531,281,4711.9531" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="4711.9531" y2="4711.9531"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="4705.1191">[70]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="333" y="4705.1191">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="145" x="385" y="4705.1191">/bulkquotes/{id}</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="4779.7969" y2="4779.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="4779.7969" y2="4792.7969"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="4792.7969" y2="4792.7969"/><polygon fill="#383838" points="285,4788.7969,275,4792.7969,285,4796.7969,281,4792.7969" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="4772.9629">[71]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="202" x="323" y="4772.9629">Pass Quote to Payer</text><path d="M8,4724.9531 L8,4817.9531 L265,4817.9531 L265,4734.9531 L255,4724.9531 L8,4724.9531 " fill="#ECECEC" filter="url(#f1eoqzgtbbfg5h)" style="stroke: #383838; stroke-width: 1.0;"/><path d="M255,4724.9531 L255,4734.9531 L265,4734.9531 L255,4724.9531 " fill="#ECECEC" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="169" x="14" y="4752.791">Obtain consent to</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="236" x="14" y="4780.4629">proceed with the transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="32" x="14" y="4808.1348">Via</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="52" y="4808.1348">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="127" x="120" y="4808.1348">/bulktransfers</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="4860.6406" y2="4860.6406"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="4860.6406" y2="4873.6406"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="4873.6406" y2="4873.6406"/><polygon fill="#383838" points="285,4869.6406,275,4873.6406,285,4877.6406,281,4873.6406" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="4853.8066">[72]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="273" x="323" y="4853.8066">Perform liquidity(NDC)check</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="4915.3125" y2="4915.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="4915.3125" y2="4928.3125"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="4928.3125" y2="4928.3125"/><polygon fill="#383838" points="285,4924.3125,275,4928.3125,285,4932.3125,281,4928.3125" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="4908.4785">[73]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="368" x="323" y="4908.4785">Reserve Funds at indivial transfer level</text><polygon fill="#383838" points="950,4965.9844,960,4969.9844,950,4973.9844,954,4969.9844" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="4969.9844" y2="4969.9844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="4963.1504">[74]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="323" y="4963.1504">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="391" y="4963.1504">/transfers</text><path d="M893,4984.9844 L982,4984.9844 L982,5003.9844 L972,5013.9844 L893,5013.9844 L893,4984.9844 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="400.7188" style="stroke: #000000; stroke-width: 2.0;" width="1445" x="893" y="4984.9844"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="908" y="5008.8223">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="997" y="5009.8223">[X times for each transfer in bulk message]</text><polygon fill="#383838" points="1551,5057,1561,5061,1551,5065,1555,5061" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="5061" y2="5061"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="5054.166">[75]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="62" x="1016" y="5054.166">POST</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="90" x="1084" y="5054.166">/transfers</text><polygon fill="#383838" points="2009,5098.6719,2019,5102.6719,2009,5106.6719,2013,5102.6719" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="5102.6719" y2="5102.6719"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="5095.8379">[76]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="392" x="1612" y="5095.8379">Performn AML checks and transfer funds</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2021" x2="2063" y1="5144.3438" y2="5144.3438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2063" x2="2063" y1="5144.3438" y2="5157.3438"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2022" x2="2063" y1="5157.3438" y2="5157.3438"/><polygon fill="#383838" points="2032,5153.3438,2022,5157.3438,2032,5161.3438,2028,5157.3438" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2028" y="5137.5098">[77]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="256" x="2070" y="5137.5098">Release of funds to Payee</text><polygon fill="#383838" points="1574,5195.0156,1564,5199.0156,1574,5203.0156,1570,5199.0156" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="5199.0156" y2="5199.0156"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="5192.1816">[78]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="294" x="1622" y="5192.1816">response (homeTransactionId)</text><polygon fill="#383838" points="973,5236.6875,963,5240.6875,973,5244.6875,969,5240.6875" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="5240.6875" y2="5240.6875"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="5233.8535">[79]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="294" x="1021" y="5233.8535">response (homeTransactionId)</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="5282.3594" y2="5282.3594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="5282.3594" y2="5295.3594"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="5295.3594" y2="5295.3594"/><polygon fill="#383838" points="973,5291.3594,963,5295.3594,973,5299.3594,969,5295.3594" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="5275.5254">[80]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="186" x="1011" y="5275.5254">Generate Fulfilment</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="5364.7031" y2="5364.7031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="5364.7031" y2="5377.7031"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="5377.7031" y2="5377.7031"/><polygon fill="#383838" points="973,5373.7031,963,5377.7031,973,5381.7031,969,5377.7031" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="5344.0332">[81]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="244" x="1011" y="5330.1973">Update transaction status</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="273" x="1011" y="5357.8691">and attach transfer response</text><polygon fill="#383838" points="285,5422.375,275,5426.375,285,5430.375,281,5426.375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="279" x2="961" y1="5426.375" y2="5426.375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="291" y="5419.541">[82]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46" x="333" y="5419.541">PUT</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="476" x="385" y="5419.541">/bulktransfers/{id} (bulkStatus == 'PROCESSING')</text><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="316" y1="5468.0469" y2="5468.0469"/><line style="stroke: #383838; stroke-width: 1.0;" x1="316" x2="316" y1="5468.0469" y2="5481.0469"/><line style="stroke: #383838; stroke-width: 1.0;" x1="275" x2="316" y1="5481.0469" y2="5481.0469"/><polygon fill="#383838" points="285,5477.0469,275,5481.0469,285,5485.0469,281,5481.0469" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="5461.2129">[83]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="297" x="323" y="5461.2129">Commit funds in DFSP ledgers</text><polygon fill="#383838" points="950,5518.7188,960,5522.7188,950,5526.7188,954,5522.7188" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="274" x2="956" y1="5522.7188" y2="5522.7188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="281" y="5515.8848">[84]</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="323" y="5515.8848">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="283" x="406" y="5515.8848">/bulktransfers/{bulkTransferId}</text><path d="M883,5537.7188 L972,5537.7188 L972,5556.7188 L962,5566.7188 L883,5566.7188 L883,5537.7188 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="432.0625" style="stroke: #000000; stroke-width: 2.0;" width="1485" x="883" y="5537.7188"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="44" x="898" y="5561.5566">loop</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="435" x="987" y="5562.5566">[X times for each transfer in bulk message]</text><path d="M893,5587.0625 L962,5587.0625 L962,5606.0625 L952,5616.0625 L893,5616.0625 L893,5587.0625 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="375.7188" style="stroke: #000000; stroke-width: 2.0;" width="1465" x="893" y="5587.0625"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="24" x="908" y="5610.9004">alt</text><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="466" x="977" y="5611.9004">[if (Individual Transfer Status == 'ABORTED')]</text><polygon fill="#383838" points="1551,5686.75,1561,5690.75,1551,5694.75,1555,5690.75" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="967" x2="1557" y1="5690.75" y2="5690.75"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="974" y="5670.0801">[85]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="140" x="1016" y="5656.2441">Abort Transfer</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="0" x="1022" y="5683.916"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="1022" y="5683.916">PATCH</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="300" x="1105" y="5683.916">/transfers/{HomeTransactionId}</text><polygon fill="#383838" points="2009,5728.4219,2019,5732.4219,2009,5736.4219,2013,5732.4219" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1563" x2="2015" y1="5732.4219" y2="5732.4219"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1570" y="5725.5879">[86]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="140" x="1612" y="5725.5879">Abort Transfer</text><line style="stroke: #383838; stroke-width: 1.0;" x1="2021" x2="2063" y1="5774.0938" y2="5774.0938"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2063" x2="2063" y1="5774.0938" y2="5787.0938"/><line style="stroke: #383838; stroke-width: 1.0;" x1="2022" x2="2063" y1="5787.0938" y2="5787.0938"/><polygon fill="#383838" points="2032,5783.0938,2022,5787.0938,2032,5791.0938,2028,5787.0938" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="2028" y="5767.2598">[87]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="276" x="2070" y="5767.2598">Compensate action for abort</text><polygon fill="#383838" points="1574,5824.7656,1564,5828.7656,1574,5832.7656,1570,5828.7656" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="1568" x2="2020" y1="5828.7656" y2="5828.7656"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="1580" y="5821.9316">[88]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1622" y="5821.9316">response</text><polygon fill="#383838" points="973,5866.4375,963,5870.4375,973,5874.4375,969,5870.4375" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="967" x2="1562" y1="5870.4375" y2="5870.4375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="979" y="5863.6035">[89]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="89" x="1021" y="5863.6035">response</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="893" x2="2358" y1="5879.4375" y2="5879.4375"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="898" y="5902.2754">[else]</text><line style="stroke: #383838; stroke-width: 1.0;" x1="962" x2="1004" y1="5941.7813" y2="5941.7813"/><line style="stroke: #383838; stroke-width: 1.0;" x1="1004" x2="1004" y1="5941.7813" y2="5954.7813"/><line style="stroke: #383838; stroke-width: 1.0;" x1="963" x2="1004" y1="5954.7813" y2="5954.7813"/><polygon fill="#383838" points="973,5950.7813,963,5954.7813,973,5958.7813,969,5954.7813" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="22" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="969" y="5934.9473">[90]</text><text fill="#000000" font-family="sans-serif" font-size="22" lengthAdjust="spacingAndGlyphs" textLength="104" x="1011" y="5934.9473">Do nothing</text><!--MD5=[f45787482576ed2a2e84aca952cb1abd]
@startuml Payee DFSP Integration Bulk Transactional Flow
/'*****
- - - - - - - - - - - - - -
******'/

skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 22
skinparam defaultFontSize 22
skinparam noteFontSize 22
skinparam monochrome true
' declare title
' title Core-Connector transactional flow patterns
' declare actors
participant "Mojaloop\nSwitch" as Switch
box "Payment Manager\nPayee DFSP" #LightGrey
participant "Mojaloop\nConnector" as MC 
participant "Core\nConnector" as CC 
end box
participant "Core banking solution" as CBS
autonumber 1 1 "<b>[0]"

== Payee DFSP integration - Discovery ==

Switch->MC: **GET** /getParty
MC- ->Switch: HTTP 202 Response
MC->CC: **GET** /getParty
activate MC
CC->CBS: **GET** [account lookup]
CBS- ->CC: Response
CC- ->MC: Response
deactivate MC
alt If Success response
MC- ->Switch: **PUT** /parties/{Type}/{Id} (or /parties/{Type}/{Id}/{SubId})
else if Error response
MC- ->Switch: **PUT** /parties/{Type}/{Id}/error (or /parties/{Type}/{Id}/{SubId}/error)
end

== Payee DFSP integration - Quote and Transfer - 2 phase commit with prior AML check ==

Switch->MC: **POST** /bulkquotes
MC- ->Switch: HTTP 202 Response
loop X times for each transfer in bulk message
    MC->CC: **POST** /quoterequest
    activate MC
    CC->CBS: **AML** checks
    CBS- ->CC: Response
    CC->CBS: **Calculate Fees**
    CBS- ->CC: Response
    CC- ->MC: Response
    deactivate MC
  MC->MC: Update transaction status \nand attach quote response
end Loop
MC- ->Switch: **PUT** /bulkquotes/{Id} 
Switch->Switch: Pass Quote to Payer
note left
Obtain consent to 
proceed with the transfer
Via **POST** /bulktransfers
end note
    Switch-> Switch: Perform liquidity(NDC)check
    Switch->Switch: Reserve Funds at indivial transfer level
    Switch->MC: **POST** /bulktransfers
    loop X times for each transfer in bulk message
        MC->CC: Create & Reserve Transfer\n **POST** /transfers 
        activate MC
        CC->CBS: Reserve funds 
        CBS- ->CC: response (homeTransactionId)
        CC- ->MC: response (homeTransactionId)
        deactivate MC
        MC->MC: Generate Fulfilment
        MC -> MC:Update transaction status \nand attach transfer response
    end Loop
    MC- ->Switch: **PUT** /bulktransfers/{id} (BulkStatus='PROCESSING') 
    Switch- ->Switch: Commit funds at indivial transfer level in DFSP ledgers
    Switch -> MC: **PATCH** /bulktransfers/{id} (BulkStatus='COMPLETED')
    loop X times for each transfer in bulk message
        MC->CC: Commit Transfer\n **PATCH** /transfers/{id} \n(TransferStatus='COMMITTED', homeTransactionId) 
        activate MC
        CC->CBS: Commit funds 
        CBS->CBS: Release funds to Payee 
        CBS- ->CC: response
        CC- ->MC: response
        deactivate MC
    end loop    

== Payee DFSP integration - Quote and Transfer - single AML check & transfer during PATCH ==

Switch->MC: **POST** /bulkquotes
MC- ->Switch: HTTP 202 Response
loop X times for each transfer in bulk message
  MC->CC: **POST** /quoterequest
    activate MC
      CC->CC: Do nothing
      CC- ->MC: Response
    deactivate MC
  MC->MC: Update transaction status \nand attach quote response
end Loop
MC- ->Switch: **PUT** /bulkquotes/{Id} 

Switch->Switch: Pass Quote to Payer DFSP
note left
Obtain consent to 
proceed with the transfer
Via **POST** /bulktransfers
end note
    Switch-> Switch: Perform liquidity(NDC)check
    Switch->Switch: Reserve Funds at indivial transfer level
    Switch->MC: **POST** /bulktransfers
    loop X times for each transfer in bulk message
        MC->CC: **POST** /transfers 
        activate MC
        CC->CC: Do Nothing 
        CC- ->MC: response
        deactivate MC
        MC->MC: Generate Fulfilment
        MC -> MC:Update transaction status \nand attach transfer response
    end Loop
    MC- ->Switch: **PUT** /bulktransfers/{id} (BulkStatus='PROCESSING') 
    Switch- ->Switch: Commit funds at indivial transfer level in DFSP ledgers
    Switch -> MC: **PATCH** /bulktransfers/{id} (BulkStatus='COMPLETED')
    loop X times for each transfer in bulk message
      MC->CC: Commit Transfer\n **PATCH** /transfers/{id} (TransferStatus='COMMITTED') 
      activate MC
      CC->CBS: Performn AML checks and transfer funds
      alt if (AML checks pass)
      CBS->CBS: Release funds to Payee 
      CBS- ->CC: response
      CC- ->MC: response
      else if (AML checks fail)
      CBS->CBS: Do nothing
      CBS- ->CC: response
      CC- ->MC: response
      deactivate MC
        rnote left MC 
    Payee DFSP AML checks / other errors result in:
    
    **Reconciliation Error**
       Payer has sent funds
       Payer DFSP has sent funds
       Hub considers that the Payee DFSP has received funds
       Payee DFSP has rejected the transaction
       Payee has not received funds
        endrnote
      end
    end Loop
 
== Payee DFSP integration - Quote and Transfer - single AML check & transfer during POST transfer ==

Switch->MC: **POST** /bulkquotes 
MC- ->Switch: HTTP 202 Response
loop X times for each transfer in bulk message
    MC->CC: **POST** /quoterequests  
    activate MC
      CC->CC: Do nothing
      CC- ->MC: Response
    deactivate MC
    MC->MC: Update transaction status \nand attach quote response
end Loop
MC- ->Switch: **PUT** /bulkquotes/{id} 

Switch->Switch: Pass Quote to Payer
note left
Obtain consent to 
proceed with the transfer
Via **POST** /bulktransfers
end note
    Switch-> Switch: Perform liquidity(NDC)check
    Switch->Switch: Reserve Funds at indivial transfer level
    Switch->MC: **POST** /transfers
    loop X times for each transfer in bulk message
        MC->CC: **POST** /transfers 
        activate MC
        CC->CBS: Performn AML checks and transfer funds
        CBS->CBS: Release of funds to Payee 
        CBS- ->CC: response (homeTransactionId)
        CC- ->MC: response (homeTransactionId)
        deactivate MC
        MC->MC: Generate Fulfilment
        MC -> MC:Update transaction status \nand attach transfer response
    end Loop
    MC- ->Switch: **PUT** /bulktransfers/{id} (bulkStatus == 'PROCESSING')
    Switch->Switch: Commit funds in DFSP ledgers
    Switch->MC: **PATCH** /bulktransfers/{bulkTransferId}  
    loop X times for each transfer in bulk message
      alt if (Individual Transfer Status == 'ABORTED')
        MC->CC: Abort Transfer\n **PATCH** /transfers/{HomeTransactionId}  
        activate MC
        CC->CBS: Abort Transfer
        CBS->CBS: Compensate action for abort
        CBS- ->CC: response
        CC- ->MC: response
        deactivate MC
      else else      
        MC->MC: Do nothing
      end
    end Loop
 


@enduml

@startuml Payee DFSP Integration Bulk Transactional Flow

skinparam activityFontSize 4
skinparam activityDiamondFontSize 30
skinparam activityArrowFontSize 22
skinparam defaultFontSize 22
skinparam noteFontSize 22
skinparam monochrome true
participant "Mojaloop\nSwitch" as Switch
box "Payment Manager\nPayee DFSP" #LightGrey
participant "Mojaloop\nConnector" as MC 
participant "Core\nConnector" as CC 
end box
participant "Core banking solution" as CBS
autonumber 1 1 "<b>[0]"

== Payee DFSP integration - Discovery ==

Switch->MC: **GET** /getParty
MC- ->Switch: HTTP 202 Response
MC->CC: **GET** /getParty
activate MC
CC->CBS: **GET** [account lookup]
CBS- ->CC: Response
CC- ->MC: Response
deactivate MC
alt If Success response
MC- ->Switch: **PUT** /parties/{Type}/{Id} (or /parties/{Type}/{Id}/{SubId})
else if Error response
MC- ->Switch: **PUT** /parties/{Type}/{Id}/error (or /parties/{Type}/{Id}/{SubId}/error)
end

== Payee DFSP integration - Quote and Transfer - 2 phase commit with prior AML check ==

Switch->MC: **POST** /bulkquotes
MC- ->Switch: HTTP 202 Response
loop X times for each transfer in bulk message
    MC->CC: **POST** /quoterequest
    activate MC
    CC->CBS: **AML** checks
    CBS- ->CC: Response
    CC->CBS: **Calculate Fees**
    CBS- ->CC: Response
    CC- ->MC: Response
    deactivate MC
  MC->MC: Update transaction status \nand attach quote response
end Loop
MC- ->Switch: **PUT** /bulkquotes/{Id} 
Switch->Switch: Pass Quote to Payer
note left
Obtain consent to 
proceed with the transfer
Via **POST** /bulktransfers
end note
    Switch-> Switch: Perform liquidity(NDC)check
    Switch->Switch: Reserve Funds at indivial transfer level
    Switch->MC: **POST** /bulktransfers
    loop X times for each transfer in bulk message
        MC->CC: Create & Reserve Transfer\n **POST** /transfers 
        activate MC
        CC->CBS: Reserve funds 
        CBS- ->CC: response (homeTransactionId)
        CC- ->MC: response (homeTransactionId)
        deactivate MC
        MC->MC: Generate Fulfilment
        MC -> MC:Update transaction status \nand attach transfer response
    end Loop
    MC- ->Switch: **PUT** /bulktransfers/{id} (BulkStatus='PROCESSING') 
    Switch- ->Switch: Commit funds at indivial transfer level in DFSP ledgers
    Switch -> MC: **PATCH** /bulktransfers/{id} (BulkStatus='COMPLETED')
    loop X times for each transfer in bulk message
        MC->CC: Commit Transfer\n **PATCH** /transfers/{id} \n(TransferStatus='COMMITTED', homeTransactionId) 
        activate MC
        CC->CBS: Commit funds 
        CBS->CBS: Release funds to Payee 
        CBS- ->CC: response
        CC- ->MC: response
        deactivate MC
    end loop    

== Payee DFSP integration - Quote and Transfer - single AML check & transfer during PATCH ==

Switch->MC: **POST** /bulkquotes
MC- ->Switch: HTTP 202 Response
loop X times for each transfer in bulk message
  MC->CC: **POST** /quoterequest
    activate MC
      CC->CC: Do nothing
      CC- ->MC: Response
    deactivate MC
  MC->MC: Update transaction status \nand attach quote response
end Loop
MC- ->Switch: **PUT** /bulkquotes/{Id} 

Switch->Switch: Pass Quote to Payer DFSP
note left
Obtain consent to 
proceed with the transfer
Via **POST** /bulktransfers
end note
    Switch-> Switch: Perform liquidity(NDC)check
    Switch->Switch: Reserve Funds at indivial transfer level
    Switch->MC: **POST** /bulktransfers
    loop X times for each transfer in bulk message
        MC->CC: **POST** /transfers 
        activate MC
        CC->CC: Do Nothing 
        CC- ->MC: response
        deactivate MC
        MC->MC: Generate Fulfilment
        MC -> MC:Update transaction status \nand attach transfer response
    end Loop
    MC- ->Switch: **PUT** /bulktransfers/{id} (BulkStatus='PROCESSING') 
    Switch- ->Switch: Commit funds at indivial transfer level in DFSP ledgers
    Switch -> MC: **PATCH** /bulktransfers/{id} (BulkStatus='COMPLETED')
    loop X times for each transfer in bulk message
      MC->CC: Commit Transfer\n **PATCH** /transfers/{id} (TransferStatus='COMMITTED') 
      activate MC
      CC->CBS: Performn AML checks and transfer funds
      alt if (AML checks pass)
      CBS->CBS: Release funds to Payee 
      CBS- ->CC: response
      CC- ->MC: response
      else if (AML checks fail)
      CBS->CBS: Do nothing
      CBS- ->CC: response
      CC- ->MC: response
      deactivate MC
        rnote left MC 
    Payee DFSP AML checks / other errors result in:
    
    **Reconciliation Error**
       Payer has sent funds
       Payer DFSP has sent funds
       Hub considers that the Payee DFSP has received funds
       Payee DFSP has rejected the transaction
       Payee has not received funds
        endrnote
      end
    end Loop
 
== Payee DFSP integration - Quote and Transfer - single AML check & transfer during POST transfer ==

Switch->MC: **POST** /bulkquotes 
MC- ->Switch: HTTP 202 Response
loop X times for each transfer in bulk message
    MC->CC: **POST** /quoterequests  
    activate MC
      CC->CC: Do nothing
      CC- ->MC: Response
    deactivate MC
    MC->MC: Update transaction status \nand attach quote response
end Loop
MC- ->Switch: **PUT** /bulkquotes/{id} 

Switch->Switch: Pass Quote to Payer
note left
Obtain consent to 
proceed with the transfer
Via **POST** /bulktransfers
end note
    Switch-> Switch: Perform liquidity(NDC)check
    Switch->Switch: Reserve Funds at indivial transfer level
    Switch->MC: **POST** /transfers
    loop X times for each transfer in bulk message
        MC->CC: **POST** /transfers 
        activate MC
        CC->CBS: Performn AML checks and transfer funds
        CBS->CBS: Release of funds to Payee 
        CBS- ->CC: response (homeTransactionId)
        CC- ->MC: response (homeTransactionId)
        deactivate MC
        MC->MC: Generate Fulfilment
        MC -> MC:Update transaction status \nand attach transfer response
    end Loop
    MC- ->Switch: **PUT** /bulktransfers/{id} (bulkStatus == 'PROCESSING')
    Switch->Switch: Commit funds in DFSP ledgers
    Switch->MC: **PATCH** /bulktransfers/{bulkTransferId}  
    loop X times for each transfer in bulk message
      alt if (Individual Transfer Status == 'ABORTED')
        MC->CC: Abort Transfer\n **PATCH** /transfers/{HomeTransactionId}  
        activate MC
        CC->CBS: Abort Transfer
        CBS->CBS: Compensate action for abort
        CBS- ->CC: response
        CC- ->MC: response
        deactivate MC
      else else      
        MC->MC: Do nothing
      end
    end Loop
 


@enduml

PlantUML version 1.2020.13(Sat Jun 13 13:26:38 BST 2020)
(APACHE source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Default Encoding: Cp1252
Language: en
Country: GB
--></g></svg>